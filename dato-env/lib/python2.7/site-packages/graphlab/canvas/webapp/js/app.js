require=function e(t,a,s){function n(i,o){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!o&&l)return l(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[i]={exports:{}};t[i][0].call(u.exports,function(e){var a=t[i][1][e];return n(a?a:e)},u,u.exports,e,t,a,s)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<s.length;i++)n(s[i]);return n}({"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/canvas.jsx":[function(e,t,a){"use strict";function s(e){"selected_variable"in e&&!h.deepEquals(_.state.selected_variable,e.selected_variable)&&(m.cancelAll(),e.messages=[]),v.set(e)}function n(){k?p.ajax({type:"GET",url:"/vars",success:function(e,t,a){e.messages=_.state.messages.concat(e.exceptions.map(function(e){return f.log("encountered an exception"),f.log(e),{text:"An error occurred of type "+e.type+": "+e.message,stack_trace:e.stack_trace}})),delete e.exceptions,s(e),setTimeout(n,2e3)},error:function(){s({messages:_.state.messages.concat([{text:"Lost connection to GraphLab Create Python session. Call .show() again from Python to re-invoke Canvas."}])})}}):setTimeout(n,1e3)}function r(){k||null!==_.state.task&&!_.state.task.finished?setTimeout(r,1e3):p.ajax({type:"GET",url:"/ping",success:function(e){setTimeout(r,1e3)}})}function i(e){var t=h.tryGetProperty(_.state.selected_variable,"name");h.deepEquals(t,e)||(m.cancelAll(),p.ajax({type:"POST",url:"/vars",data:{selected:JSON.stringify(e),_xsrf:h.getCookie("_xsrf")},success:function(e){s(e)}}))}function o(e,t){var a={feedback:"\n\n"+e+"\n",log:JSON.stringify(t),language:navigator.language,recipient:"product-feedback@dato.com",subject:_.state.gl_product_key,version:_.state.gl_version,email:_.state.user_email,env_report:"REMOTE_ADDR,HTTP_USER_AGENT",print_config:"subject",sort:"order:version,email,feedback,log,language"};p.ajax({type:"POST",url:"http://formmail.dreamhost.com/cgi-bin/formmail.cgi",data:a})}var l=e("react/addons"),c=e("bowser"),u=e("lodash"),p=e("zepto-browserify").$,d=e("./page_layout"),h=e("./common_util"),m=e("./taskqueue"),b=e("./common_controls"),v=e("./state"),f=e("./logging"),y=e("./data_components/data_views"),g=e("./model_components/model_views"),x={model_objects:e("./model_components/model_objects"),data_objects:e("./data_components/data_objects"),job:e("./job_components/job"),job_session:e("./job_components/job_session"),predservice:e("./ps_components/predservice"),ps_session:e("./ps_components/ps_session")},w=h.merge(h.merge(y.views,x),g.views),k=!0,_=null,j=l.createClass({displayName:"Descriptives",handleClick:function(e){var t=this.props.selected_variable.concat([e]);i(t)},render:function(){if(0===this.props.selected_variable.length)return null;if("NoneType"===this.props.type)return null;var e=this.props.type;return l.createElement("div",{className:"canvas-descriptives"},l.createElement("span",null,l.createElement("span",{className:"label"},"Type:")," ",e),u.map(this.props.descriptives,function(e,t){var a="number"==typeof e?h.formatNumber(e):e;return l.createElement("span",{key:t},l.createElement("span",{className:"label"},!u.isEmpty(this.props.links)&&t in this.props.links?l.createElement("a",{href:"javascript:",onClick:this.handleClick.bind(this,this.props.links[t]),style:{color:"#84c5e1",fontWeight:300,textDecoration:"underline"}},t+":"):" "+t+":")," ",String(a))},this))}}),E=l.createClass({displayName:"PythonVariable",getInitialState:function(){return{hover:!1}},handleClick:function(e){i(this.props.variable.name)},onMouseOver:function(e){this.setState({hover:!0})},onMouseOut:function(e){this.setState({hover:!1})},render:function(){var e=this.props.variable.type.toLowerCase(),t={dataobjects:"data",modelobjects:"models",predictiveservices:"predserv",jobs:"jobs"};if(e in t){var a=t[e],s=this.props.selected?"sel":this.state.hover?"hvr":"nml";return l.createElement("a",{href:"javascript:",onClick:this.handleClick,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:{display:"block"}},l.createElement("img",{src:"/images/lnav_"+a+"_"+s+".png",alt:this.props.variable.name}))}return null}}),S=l.createClass({displayName:"PythonVariables",isSelectedVariable:function(e){var t=h.tryGetProperty(this.props.selected_variable,"name",[]);return e.length>t.length?!1:h.deepEquals(t.slice(0,e.length),e)},render:function(){var e=h.tryGetProperty(this.props.selected_variable,"name",[]),t=h.tryGetProperty(this.props.selected_variable,"type"),a=-1!==y.types.indexOf(t)&&e.length>0&&"Jobs"!=e[0]||h.deepEquals(h.tryGetProperty(this.props.selected_variable,"name"),["Data"]),s=-1!==g.types.indexOf(t)&&e.length>0&&"Jobs"!=e[0]||h.deepEquals(h.tryGetProperty(this.props.selected_variable,"name"),["Models"]);return l.createElement("div",null,l.createElement("h3",{className:"canvas-title"},"GraphLab ",l.createElement("span",{className:"canvas-brand"},"Canvas")),l.createElement(E,{variable:{name:["Data"],type:"DataObjects"},selected:a}),l.createElement(E,{variable:{name:["Models"],type:"ModelObjects"},selected:s}),this.props.variables.map(function(e,t){if(-1!==y.types.indexOf(e.type)||h.deepEquals(e.name,["Data"]))return null;var a=this.isSelectedVariable(e.name);return l.createElement(E,{variable:e,selected:a,key:t})},this))}}),C=l.createClass({displayName:"ProgressBar",render:function(){var e=this.props.task,t=Math.round(100*h.tryGetProperty(e,"progress",0)),a=h.tryGetProperty(e,"finished"),s=["width",0===t?"0s":"0.6s","ease,","opacity",a?"2s":"0s","ease"].join(" "),n={width:t+"%",opacity:a?0:.5,transition:s,WebkitTransition:s},r="canvas-progressbar progress progress-striped active";return l.createElement("div",{className:r},l.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:n}),l.createElement("div",{className:"canvas-progressbar-contents"},this.props.children))}}),D=l.createClass({displayName:"BreadcrumbTitle",getBreadcrumbPiece:function(e,t,a){var s=e[t],n=a?l.createElement("polygon",{points:"0,0 10,11, 0,22",fill:"#495163"}):l.createElement("g",null,l.createElement("rect",{x:0,y:0,width:11,height:22,fill:"#495163"}),l.createElement("line",{x1:0,y1:-2,x2:10,y2:11,strokeWidth:3,stroke:"#5a6378",strokeLinecap:"square"}),l.createElement("line",{x1:10,y1:11,x2:0,y2:24,strokeWidth:3,stroke:"#5a6378",strokeLinecap:"square"}));return l.createElement("span",null,l.createElement("a",{href:"javascript:",onClick:i.bind(this,e.slice(0,t+1)),style:{height:22,lineHeight:"1.15em",fontSize:14,backgroundColor:"#495163",display:"inline-block",verticalAlign:"middle",color:"white",padding:"4px 4px 4px 10px"}},s),l.createElement("svg",{style:{width:11,height:22,verticalAlign:"middle"}},n))},getTitle:function(e,t,a){var s=e[t];return l.createElement("span",{className:"active",style:{marginLeft:a>1?10:0,fontSize:18,fontWeight:500,letterSpacing:"0.03em"}},s)},render:function(){var e=h.tryGetProperty(this.props.selected_variable,"name",[]),t=h.tryGetProperty(this.props.selected_variable,"type",""),a=-1!==y.types.indexOf(t)&&e.length>0&&"Jobs"!=e[0];return l.createElement("div",{className:"canvas-breadcrumb"},a?this.getBreadcrumbPiece(["Data"],0,1===e.length):null,e.map(function(t,s){return l.createElement("span",{key:s},s===e.length-1?this.getTitle(e,s,e.length+(a?1:0)):this.getBreadcrumbPiece(e,s,s==e.length-2))}.bind(this)))}}),T=l.createClass({displayName:"FeedbackButton",mixins:[b.Modal],getInitialState:function(){return{includeLog:!0}},setEmail:function(e){this.props.setEmail(e.target.value)},submit:function(){var e,t=document.querySelector(".canvas-feedback-textarea").value;this.state.includeLog&&(e=f.get()),o(t,e),this.modalClose()},getRadioButton:function(e){var t={type:"radio",name:"canvas-feedback-log",value:e?"true":"false",onChange:this.setState.bind(null,{includeLog:e})};this.state.includeLog===e&&(t.checked=!0);var a=l.DOM.input(t);return l.createElement("span",null,e?"Yes":"No",a)},render:function(){var e={type:"email",name:"canvas-feedback-email",className:"canvas-feedback-email",placeholder:"E-mail (optional)",onChange:this.setEmail},t=l.DOM.input(e),a=l.createElement("div",{className:"canvas-feedback-form"},l.createElement("div",{className:"canvas-feedback-log-area"},l.createElement("label",{htmlFor:"canvas-feedback-log"},"Include log file with feedback?"),l.createElement("span",{className:"canvas-feedback-log-radios"},this.getRadioButton(!0),this.getRadioButton(!1))),l.createElement("div",null,l.createElement("textarea",{name:"canvas-feedback-text",className:"canvas-feedback-textarea",placeholder:"Enter your feedback..."})),l.createElement("div",null,"If you would like a reply via e-mail, enter your address.",t),l.createElement("div",{className:"canvas-form-buttons"},l.createElement("a",{className:"canvas-form-submit",href:"javascript:",onClick:this.submit},"Submit"),l.createElement("a",{className:"canvas-form-cancel",href:"javascript:",onClick:this.modalClose},"Cancel"))),s=this.modalOpen.bind(null,"Send Feedback",a,null),n=l.createElement("a",{className:"canvas-feedback-button",href:"javascript:",onClick:s},"Send us",l.createElement("br",null),"Feedback");return l.createElement("div",{className:"canvas-feedback"},l.createElement("img",{src:"/images/gl_logo.png",style:{width:60,height:39}}),n,this.getModal())}}),N=l.createClass({displayName:"Header",render:function(){return l.createElement("div",{className:"canvas-header-container"},l.createElement("div",{className:"canvas-header-colorbar"},["#b0007f","#0a8cc4","#85bd00","#ff5500","#5e5555"].map(function(e,t){var a={backgroundColor:e,left:String(20*t)+"%"};return l.createElement("div",{key:e,style:a})})))}}),L=l.createClass({displayName:"DataStructureView",getViewFile:function(e){return h.tryGetProperty(e.selected_variable,"view_file")},render:function(){var e=this.getViewFile(this.props);if(null!==e&&e in w){var t=w[e],a=t.View;return l.createElement("div",{style:{marginLeft:d.get("view_main_margin_left"),marginRight:d.get("view_main_margin_right"),marginBottom:d.get("view_main_margin_bottom")}},l.createElement(a,{selectVariable:i,selected_variable:this.props.selected_variable,variables:this.props.variables}))}return l.createElement("div",null)}}),P=l.createClass({displayName:"StatusItem",mixins:[b.Modal],getInitialState:function(){return{showReportBug:!0}},reportBug:function(){o("unexpected_exception: "+JSON.stringify(this.props.message),JSON.stringify(f.get())),this.setState({showReportBug:!1})},render:function(){var e=null;if("stack_trace"in this.props.message){var t=this.modalOpen.bind(this,"Stack Trace",l.createElement("pre",null,l.createElement("code",null,this.props.message.stack_trace))),a=this.state.showReportBug?l.createElement("a",{href:"javascript:",onClick:this.reportBug},"Report Bug to GraphLab"):"Bug reported.";e=l.createElement("div",{className:"canvas-statusbar-stack-trace-link"}," | ",l.createElement("a",{href:"javascript:",onClick:t},"View Stack Trace")," | ",a,this.getModal())}return l.createElement("div",{className:"alert alert-danger alert-dismissable"},l.createElement("button",{type:"button",className:"close","aria-hidden":"true",onClick:this.props.dismiss},"×"),this.props.message.text,e)}}),B=l.createClass({displayName:"StatusBar",render:function(){return l.createElement("div",{className:"canvas-statusbar"},this.props.messages.map(function(e,t){return l.createElement(P,{key:t,message:e,dismiss:u.partial(this.props.dismiss,t)})}.bind(this)))}}),A=l.createClass({displayName:"LeftBar",render:function(){return l.createElement("div",{className:"canvas-leftnav"},this.props.children)}}),M=l.createClass({displayName:"Page",getInitialState:function(){return{selected_variable:null,variables:[],task:null,messages:[],gl_version:"unknown",gl_product_key:"unknown",user_email:null}},shouldComponentUpdate:function(e,t){return!h.deepEquals(this.state,t)},componentWillMount:function(){f.reportMetric("script_load.duration.ms",Date.now()-g_scriptLoadStart),window.onerror=function(e,t,a){f.reportMetric("unhandled_exception",null,{error:e.substring(0,100),url:t.substring(0,100),line:a})},window.onfocus=function(){k=!0},window.onblur=function(){k=!1},f.reportMetric("browser",null,{name:c.browser.name,version:c.browser.version})},componentDidMount:function(){_=this,v.addListener(_),n(),r(),m.start()},setEmail:function(e){this.setState({user_email:e})},dismissStatus:function(e){this.setState({messages:this.state.messages.slice(0,e).concat(this.state.messages.slice(e+1))})},render:function(){var e=this.state.selected_variable;return l.createElement("div",{id:"canvas-page"},l.createElement("div",{className:"canvas-body-container"},l.createElement(A,null,l.createElement(S,{variables:this.state.variables,selected_variable:e}),l.createElement(T,{setEmail:this.setEmail,user_email:this.state.user_email})),l.createElement("div",{className:"canvas-main"},l.createElement(N,null),l.createElement(B,{messages:this.state.messages,dismiss:this.dismissStatus}),l.createElement(C,{task:this.state.task,selected_variable:e},l.createElement(D,{selected_variable:e}),l.createElement(j,{selected_variable:h.tryGetProperty(e,"name",[]),descriptives:h.tryGetProperty(e,"descriptives",{}),links:h.tryGetProperty(e,"descriptives_links",{}),type:h.tryGetProperty(e,"type")})),l.createElement(L,{selected_variable:e,variables:this.state.variables}))))}});t.exports=M},{"./common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./data_components/data_objects":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/data_objects.jsx","./data_components/data_views":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/data_views.jsx","./job_components/job":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/job_components/job.jsx","./job_components/job_session":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/job_components/job_session.jsx","./logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","./model_components/model_objects":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_objects.jsx","./model_components/model_views":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_views.jsx","./page_layout":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/page_layout.jsx","./ps_components/predservice":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/ps_components/predservice.jsx","./ps_components/ps_session":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/ps_components/ps_session.jsx","./state":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/state.jsx","./taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",bowser:"bowser",lodash:"lodash","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx":[function(e,t,a){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n=e("react/addons"),r=(e("./page_layout"),e("./common_util")),i=e("./taskqueue"),o=(e("lodash"),n.createClass({displayName:"Tooltip",render:function(){var e={display:this.props.show?"":"none",top:this.props.y-50,left:this.props.x-150};return n.createElement("div",{style:e,className:"canvas-tooltip"},this.props.data)}})),l=n.createClass({displayName:"Modal",doNothing:function(e){e.stopPropagation()},render:function(){var e=this.props.title?n.createElement("div",{className:"modal-header"},n.createElement("button",{type:"button",className:"close",onClick:this.props.closeModal},"×"),n.createElement("h4",{className:"modal-title"},this.props.title)):null,t="modal-dialog "+(this.props.additionalClass?this.props.additionalClass:"");return n.createElement("div",{style:{color:"black"}},n.createElement("div",{onClick:this.props.closeModal,className:"modal fade"+(this.props.open?" in":""),style:{display:this.props.open?"block":"none"}},n.createElement("div",{onClick:this.doNothing,className:t},n.createElement("div",{className:"modal-content"},e,n.createElement("div",{className:"modal-body"},this.props.body)))),n.createElement("div",{className:"modal-backdrop fade "+(this.props.open?"in":"hidden")}))}}),c={setWindowDimensions:function(){this.setState({windowResize:!0})},componentWillMount:function(){window.addEventListener("resize",this.setWindowDimensions)},componentWillUnmount:function(){window.removeEventListener("resize",this.setWindowDimensions)}};t.exports={Button:n.createClass({displayName:"Button",getInitialState:function(){return{depressed:!1}},getDefaultProps:function(){return{backgroundColor:"#0a8cc4",depressedColor:"#005991"}},mouseDown:function(){this.setState({depressed:!0})},mouseUp:function(){this.setState({depressed:!1})},click:function(e){return this.mouseUp(),this.props.disabled?void 0:this.props.onClick(e)},render:function(){var e=r.merge({display:"inline-block",paddingLeft:12,paddingRight:12,height:26,fontSize:12,color:"white",backgroundColor:this.state.depressed?this.props.depressedColor:this.props.backgroundColor,textTransform:"uppercase",textAlign:"center",textDecoration:"none",lineHeight:"26px",transition:"background-color "+(this.state.depressed?0:200)+"ms linear"},this.props.style);return this.props.disabled&&(e.backgroundColor="grey",e.cursor="not-allowed"),n.createElement("a",{href:"javascript:",onClick:this.click,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,disabled:this.props.disabled,style:e},this.props.children)}}),Menu:{mixins:[c],getInitialState:function(){return{items:[],menuOpen:!1,top:0,left:0}},itemClick:function(e,t){t.preventDefault(),t.stopPropagation(),e.onClick(this.props.selected_variable,t)},openMenu:function(e,t){this.setState({menuOpen:!0,items:e,top:t.clientY,left:t.clientX})},closeMenu:function(){this.setState({menuOpen:!1})},getMenu:function(){return this.state.menuOpen?n.createElement("div",null,n.createElement("div",{style:{position:"fixed",top:0,left:0,width:this.state.windowWidth,height:this.state.windowHeight,zIndex:40},onClick:this.closeMenu}),n.createElement("div",{style:{position:"fixed",top:this.state.top,left:this.state.left,border:"1px solid #ddd",zIndex:41}},this.state.items.map(function(e,t){return n.createElement("div",{key:t},n.createElement("a",{href:"javascript:",onClick:this.itemClick.bind(this,e),style:{display:"inline-block",width:"100%",padding:4,backgroundColor:"white"}},e.label))}.bind(this)))):n.createElement("div",null)}},Searchable:{getInitialState:function(){return{search_value:""}},getSearchBox:function(e,t){return n.createElement("input",{type:"search",value:this.state.search_value,onChange:this.setSearchValue,placeholder:e,style:t})},setSearchValue:function(e){this.setState({search_value:e.target.value})}},Slider:n.createClass({displayName:"Slider",render:function(){return r.assert(this.props.value>=this.props.min),r.assert(this.props.value<=this.props.max),n.createElement("div",{className:"canvas-slider"},n.createElement("div",{className:"canvas-slider-label"},this.props.label),n.createElement("div",{className:"canvas-slider-control"},this.props.min,n.createElement("input",s({},this.props,{type:"range",name:"canvas-slider-range"})),this.props.max),n.createElement("div",{className:"canvas-slider-box"},n.createElement("input",s({},this.props,{type:"number",name:"canvas-slider-number"}))))}}),SortableTable:n.createClass({displayName:"SortableTable",getValue:function(e,t,a){var s=null;if(null===t)if(-1!==this.props.sortable.indexOf(a)){var r="fa fa-sort";this.props.sortColumn===a&&("number"===this.props.types[a]?r+="-numeric":"string"===this.props.types[a]&&(r+="-alpha")),this.props.sortColumn===a&&this.props.sortDesc?r+="-desc":this.props.sortColumn===a&&(r+="-asc"),s=n.createElement("span",null,e[a],n.createElement("a",{onClick:this.sort.bind(this,a),href:"javascript:"},n.createElement("i",{className:r,style:{marginLeft:6,marginRight:6}})))}else s=e[a];else s=e[t][a];return n.createElement("div",{style:{padding:8,display:"inline-block"}},s)},getDefaultProps:function(){return{sortable:[],sortColumn:null,sortDesc:!1,renderTD:!0}},copyProps:function(){return{data:r.deepCopy(this.props.data),sortColumn:this.props.sortColumn,sortDesc:this.props.sortDesc}},sort:function(e){var t=this.props.sortColumn===e&&!this.props.sortDesc;this.props.onSort(e,t)},render:function(){var e=r.deepCopy(this.props.data),t=this.props.sortDesc;e.sort(function(e,a){return e=e[this.props.sortColumn],a=a[this.props.sortColumn],"number"===this.props.types[this.props.sortColumn]&&("n/a"===e&&(e=null),"n/a"===a&&(a=null)),null===e?null===a?0:1:null===a?1:"number"==typeof e?t?a-e:e-a:(r.assert("string"==typeof e),t?a.localeCompare(e):e.localeCompare(a))}.bind(this));var a=this.getValue;return"getValue"in this.props&&(a=this.props.getValue.bind(this)),n.createElement("div",{style:this.props.style},n.createElement("table",{className:"table table-bordered",style:r.merge({width:"auto",border:"none"},this.props.tableStyle)},n.createElement("thead",null,n.createElement("tr",null,this.props.headers.map(function(e,t){return n.createElement("th",{key:t,style:{whiteSpace:"nowrap",verticalAlign:"middle",padding:0,border:"none"}},a(this.props.headers,null,t))}.bind(this)))),n.createElement("tbody",null,e.map(function(t,s){return n.createElement("tr",{key:s},t.map(function(t,r){var i=a(e,s,r);return this.props.renderTD&&(i=n.createElement("td",{style:{padding:0,verticalAlign:"middle",border:"none"},key:r},i)),i}.bind(this)))}.bind(this)))))}}),Tooltip:{getInitialState:function(){return{tooltip:{show:!1,x:0,y:0,data:null,timeoutFn:null}}},tooltipMouseOver:function(e,t){this.setState({tooltip:{show:!1,x:t.clientX,y:t.clientY,data:e,timeoutFn:setTimeout(function(){this.setState({tooltip:r.merge(this.state.tooltip,{show:!0})})}.bind(this),400)}})},tooltipMouseOut:function(e){clearTimeout(this.state.tooltip.timeoutFn),this.setState({tooltip:{show:!1,timeoutFn:null}})},getTooltip:function(){return n.createElement(o,{data:this.state.tooltip.data,x:this.state.tooltip.x,y:this.state.tooltip.y-20,show:this.state.tooltip.show})}},Modal:{getInitialState:function(){return{modal:{open:!1}}},modalOpen:function(e,t,a){this.setState({modal:{open:!0,title:e,body:t,additionalClass:a}})},modalClose:function(){this.setState({modal:{open:!1}})},getModal:function(){return n.createElement(l,{open:this.state.modal.open,closeModal:this.modalClose,title:this.state.modal.title,body:this.state.modal.body,additionalClass:r.tryGetProperty(this.state.modal,"additionalClass","")})}},SizeToWindow:c,Tabs:n.createClass({displayName:"Tabs",mixins:[c],getInitialState:function(){return{initialTab:this.props.initialTab,selectedTab:this.props.initialTab}},componentWillReceiveProps:function(e){e.initialTab!=this.state.initialTab&&this.setState({initialTab:e.initialTab,selectedTab:e.initialTab})},selectTab:function(e,t){var a={};a[this.state.selectedTab]=!0,this.setState({selectedTab:e})},render:function(){return n.createElement("div",null,n.createElement("ul",{className:"nav nav-tabs",role:"tablist"},this.props.tabs.map(function(e,t){return n.createElement("li",{key:t,className:e[0]===this.state.selectedTab?"active":""},n.createElement("a",{href:"javascript:",onClick:this.selectTab.bind(this,e[0])},e[0]))}.bind(this))),n.createElement("div",{className:"tab-content",style:{overflow:"auto"}},this.props.tabs.map(function(e,t){var a=e[0],r={visible:a===this.state.selectedTab},i=e[1],o=a===this.state.selectedTab;return n.createElement("div",{key:t,className:"tab-pane"+(o?" active":"")},n.createElement("div",{className:"canvas-view-main"},n.createElement(i,s({},this.props,{tab:r,activeTab:o}))))}.bind(this))))}}),AsyncState:{componentWillReceiveProps:function(e){r.deepEquals(this.props,e)||this.setState(this.getInitialState(e),function(){this.updateAsyncState(e)}.bind(this))},addTask:function(e){this.tasks.push(e),i.add(e)},cancelAllTasks:function(){this.tasks.forEach(function(e){e.cancel()}),this.tasks=[]},componentDidMount:function(){this.tasks=[],this.updateAsyncState(this.props)},componentWillUnmount:function(){this.cancelAllTasks()}},SVG:{ellipse:n.createClass({displayName:"ellipse",render:function(){var e="M "+(this.props.cx-this.props.rx)+" "+this.props.cy+" a "+this.props.rx+" "+this.props.ry+" 0 1 0 "+2*this.props.rx+" 0 a "+this.props.rx+" "+this.props.ry+" 0 1 0 "+-(2*this.props.rx)+" 0";return n.createElement("path",s({},this.props,{d:e}))}})}}},{"./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./page_layout":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/page_layout.jsx","./taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx":[function(e,t,a){"use strict";function s(e){if("assert"in console)console.assert(e);else if(!e){var t="assertion failed";"error"in console?console.error(t):"log"in console&&console.log(t),"trace"in console&&console.trace()}}function n(e,t){var a=Math.pow(10,e);return Math.round(t*a)/a}function r(e){if(null===e)return 0/0;if(.001>e&&e>0||e>-.001&&0>e)return e.toExponential(3);var t=e.toLocaleString();return t.length>24&&(t=e.toExponential(5)),t}function i(e,t,a){var s={};for(var n in e)s[n]=e[n];for(var r in t)s[r]=a&&r in s?i(s[r],t[r]):t[r];return s}function o(e){return null!==e&&"object"==typeof e&&e.type&&"image"===e.type.toLowerCase()?!0:!1}var l=e("d3"),c=e("dagre"),u=e("react/addons"),p=[[Math.pow(2,20),1e3],[Math.pow(2,27),5e3]],d=l.scale.linear().domain(p.map(function(e){return e[0]})).range(p.map(function(e){return e[1]})),h=u.createClass({displayName:"CanvasImage",draw:function(e){for(var t=this.props.data,a=e.createImageData(this.props.width,this.props.height),n=t.length/this.props.channels,r=0;4*n>r;r+=4){var i=r/4*this.props.channels;a.data[r]=t[i],1===this.props.channels?(a.data[r+1]=t[i],a.data[r+2]=t[i],a.data[r+3]=255):(a.data[r+1]=t[i+1],a.data[r+2]=t[i+2],3===this.props.channels?a.data[r+3]=255:(s(4===this.props.channels),a.data[r+3]=t[i+3]))}e.putImageData(a,0,0)},componentDidMount:function(){var e=u.findDOMNode(this).getContext("2d");this.draw(e)},componentDidUpdate:function(){var e=u.findDOMNode(this).getContext("2d");e.clearRect(0,0,this.props.width,this.props.height),this.draw(e)},shouldComponentUpdate:function(e,t){return e.id!==this.props.id},render:function(){return u.createElement("canvas",{style:this.props.style,width:this.props.width,height:this.props.height})}});t.exports={assert:s,merge:i,partial:function(e,t,a){var s={};return a?Object.keys(e).forEach(function(a){-1===t.indexOf(a)&&(s[a]=e[a])}):t.forEach(function(t){s[t]=e[t]}),s},objectMap:function(e,t){var a={};for(var s in e)a=i(a,t(s,e[s]));return a},tryGetProperty:function m(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;if(l=void 0,n=!1,"undefined"==typeof o&&(o=null),null==i)return o;if(null==r)return o;if("string"==typeof i||"number"==typeof i)return i in r?r[i]:o;s(Array.isArray(i));var l=i.shift();0!==i.length?(e=m(r,l),t=i,a=o,n=!0):(e=r,t=l,a=o,n=!0)}},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},deepEquals:function b(e,t,a){if("undefined"==typeof a&&(a=0),a>500)return s(!1),!1;if("function"==typeof e&&"function"==typeof t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length;r++)if(n=n&&b(e[r],t[r],a+1),!n)return n;return n}if("object"==typeof e){var i={};for(var o in e)i[o]=1;for(var o in t){if(!(o in i))return!1;i[o]++}var n=!0;for(var o in i){if(2!==i[o])return!1;if(n=n&&b(e[o],t[o],a+1),!n)return n}return n}return e===t},escapeURL:function(e){return e.replace(/ /g,"%20")},sortFrequentItems:function(e,t){var a=[];for(var s in e)a.push({key:s,value:e[s]});return a.sort(function(e,t){return t.value.frequency-e.value.frequency}),a.slice(0,t)},formatElapsed:function(e){var t=new Date(e),a={hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()};for(var s in a){var n=String(a[s]);n.length<2&&(n="0"+n),a[s]=n}return a.hours+":"+a.minutes+":"+a.seconds},numberWithSuffix:function(e){if(e>100)return String(e);var t=e%10;return 1===t&&11!==e?e+"st":2===t&&12!==e?e+"nd":3===t&&13!==e?e+"rd":e+"th"},roundToXDecimalPlaces:n,formatNumber:r,formatSArrayValue:function(e,t){var a=e;if(""===e)a="''";else if("number"==typeof e)a=r(e);else if(o(e)){var s={};t&&(s.maxHeight=t);{e.value}a="raw"===e.format?u.createElement(h,{alt:"Image Content",width:e.width,height:e.height,data:e.value,channels:e.channels,style:s,id:e.id}):u.createElement("img",{alt:"Image Content",src:"data:"+e.value,style:s})}return a},isSArrayImageType:o,siPrefixToShortScale:function(e){var t={Y:"septillion",Z:"sextillion",E:"quintillion",P:"quadrillion",T:"trillion",G:"billion",M:"million",k:"thousand",h:"hundred",da:"ten","":null,d:"tenth",c:"hundredth",m:"thousandth","µ":"millionth",n:"billionth",p:"trillionth",f:"quadrillionth",a:"quintillionth",z:"sextillionth",y:"septillionth"};return e in t?t[e]:(Util.assert(!1),null)},getCookie:function(e){var t=document.cookie.match("\\b"+e+"=([^;]*)\\b");return t?t[1]:void 0},getSketchPollInterval:function(e){return e<p[0][0]?p[0][1]:e>p[1][0]?p[1][1]:d(e)},getColorFromNodeType:function(e){var t="";return"Task"==e?t="#b0007f":"input"==e||"output"==e?t="#0a8cc4":"param"==e&&(t="#85bd00"),t},getColorFromStatus:function(e,t){var a="";return t?"#ff5500":a="Completed"==e?"#0a8cc4":"Running"==e?"#85bd00":"Failed"==e?"#B80000":"Canceled"==e?"#B80000":"#B2B2B2"},getColorFromStatusHighlight:function(e){var t="";return t="Completed"==e?"#0a6ca4":"Running"==e?"#659d00":"Failed"==e?"#A80000":"#A2A2A2"},getEdgeStrokeColor:function(e,t){return e?t?"#727272":"#E2E2E2":"#B2B2B2"},getDepGraphSelectedStrokeColor:function(){return"#5e5555"},dagreLayout:function(e,t,a,s,n,r,i){var o=new c.graphlib.Graph({directed:!0});o.setGraph({}),o.setDefaultEdgeLabel(function(){return{}});for(var l=0;l<e.length;l++)o.setNode(e[l].name,{label:String(e[l].name),width:a,height:s});for(var l=0;l<t.length;l++)o.setEdge(t[l].source,t[l].target);o.setGraph(0>n&&0>r?{rankdir:i}:n>=0&&0>r?{rankdir:i,edgesep:n}:0>n&&r>=0?{rankdir:i,ranksep:r}:{rankdir:i,edgesep:n,ranksep:r});var u=(c.layout(o),null);o.nodes().forEach(function(t){for(var a=0;a<e.length;a++)e[a].name==t&&(u=o.node(t),e[a].x=u.x,e[a].y=u.y)});var p,d,h,m=0;return o.edges().forEach(function(e){p=o.node(e.v),d=o.node(e.w),h=o.edge(e);for(var a=[[p.x,p.y]],s=0;s<h.points.length;s++)a.push([h.points[s].x,h.points[s].y]);a.push([d.x,d.y]),t[m++].points=a}),{vertices:e,edges:t}}}},{d3:"d3",dagre:"dagre","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/data_objects.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("./data_views").types,r=(e("../common_controls"),s.createClass({displayName:"Header",render:function(){return s.createElement("th",null,this.props.text)}
}));t.exports={View:s.createClass({displayName:"View",render:function(){return s.createElement("div",{className:"canvas canvas-view-main data-objects",style:{backgroundColor:"#eee",paddingLeft:32,paddingRight:32,paddingTop:20}},s.createElement("table",{className:"table table-striped",style:{backgroundColor:"white"}},s.createElement("thead",null,s.createElement("tr",null,s.createElement(r,{text:"Name"}),s.createElement(r,{text:"Type"}))),s.createElement("tbody",null,this.props.variables.map(function(e,t){return e.name.length>1||-1===n.indexOf(e.type)?null:s.createElement("tr",{key:t},s.createElement("td",null,s.createElement("a",{href:"javascript:",onClick:this.props.selectVariable.bind(null,e.name),style:{display:"inline-block",width:"100%"}},e.name[0])),s.createElement("td",null,e.type))},this))))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","./data_views":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/data_views.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/data_views.jsx":[function(e,t,a){"use strict";var s=["SArray","SFrame","SGraph"],n={sframe:e("./sframe"),sgraph:e("./sgraph"),sarray:e("./sarray")};t.exports={views:n,types:s}},{"./sarray":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/sarray.jsx","./sframe":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/sframe.jsx","./sgraph":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/sgraph.jsx"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/sarray.jsx":[function(e,t,a){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n=e("react/addons"),r=e("react-chartjs"),i=e("d3"),o=e("zepto-browserify").$,l=e("../plots"),c=e("../common_util"),u=e("../taskqueue"),p=e("../common_controls"),d=e("../logging"),h=n.createClass({displayName:"ImageView",mixins:[p.AsyncState,p.SizeToWindow],getInitialState:function(){return{images:this.props.ipython?this.props.rows:[]}},updateAsyncState:function(e){var t=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);0!==t&&this.addTask(new u.SingleTask("/rows/0/20","get_rows").done(function(e){this.setState({images:e.values})}.bind(this)))},render:function(){var e=this.props.selected_variable.name,t=Array.isArray(e)?e[e.length-1]:e,a=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0),s="All "+String(a)+" images in ";return a>=20&&(s="The first 20 images in "),n.createElement("div",{className:"tab-content",style:{maxWidth:this.state.windowWidth-240,maxHeight:this.props.ipython?"none":this.state.windowHeight-124,overflow:"auto"}},n.createElement("div",{className:"canvas canvas-view-main sarray"},n.createElement("h3",null,s," ",n.createElement("em",null,t)),this.state.images.map(function(e,t){return n.createElement("div",{key:t,style:{padding:10,margin:10,border:"1px solid #5e5555",display:"inline-block"}},c.formatSArrayValue(e,200))}.bind(this))))}}),m=n.createClass({displayName:"CategoricalView",statics:{tabName:"Categorical"},getInitialState:function(){return{frequentItemsShown:30}},getDefaultProps:function(){return{show_title:!0}},showMoreFrequentItems:function(){this.setState({frequentItemsShown:this.state.frequentItemsShown+30})},render:function(){var e=this.props.sketch,t=c.tryGetProperty(e,"frequent_items",[]),a=Object.keys(t).length>this.state.frequentItemsShown?n.createElement("div",null,n.createElement("a",{href:"javascript:",onClick:this.showMoreFrequentItems},"Show More")):null;t=c.sortFrequentItems(t,this.state.frequentItemsShown);var s=t.map(function(t){return[c.formatSArrayValue(t.value.value,26),c.formatNumber(t.value.frequency),c.formatNumber(t.value.frequency/e.size*100)+"%"]}.bind(this)),r=["table","table-bordered","table-condensed","canvas-singlecolumn-table"],o=i.scale.linear().domain([0,i.max(t.map(function(e){return e.value.frequency}))]).range([0,250]),l=this.props.show_title?n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},"Most frequent items from ",n.createElement("em",null,this.props.selected_column)):null,u=0===t.length?n.createElement("span",null,"No values appear with ≥ 0.01% occurrence."):n.createElement("table",{className:r.join(" "),style:{borderRight:"none",borderBottom:"none"}},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Value"),n.createElement("th",null,"Count"),n.createElement("th",null,"Percent"))),n.createElement("tbody",null,s.map(function(e,a){return n.createElement("tr",{key:a},e.map(function(e,t){return n.createElement("td",{key:t},e)}.bind(this)),n.createElement("td",{style:{width:"250px",border:"none",padding:"0px 0px 0px 5px"}},n.createElement("div",{style:{width:o(t[a].value.frequency),height:26,backgroundColor:"#85bd00",transition:"width 0.3s ease"}})))}.bind(this))));return n.createElement("div",{className:"canvas-sarray-table categorical"},l,u,a)}}),b=n.createClass({displayName:"Histogram",render:function(){if(!this.props.histogram)return n.createElement("div",null);var e=this.props,t=e.histogram,a=e.min,s=e.max,o=i.range(t.min,t.max,(t.max-t.min)/t.bins.length).slice(0,t.bins.length),l={labels:o.map(function(e,n){return{left:function(s){return 0==n?s?a:t.min:e},right:function(e){return n==t.bins.length-1?e?s:t.max:o[n+1]},mean:function(){return(this.left()+this.right())/2},hoverText:function(){return" values between "+c.formatNumber(this.left(!0))+" and "+c.formatNumber(this.right(!0))},toString:function(){return-1!==[1,2,4,5,7,8,10].indexOf(n)?"":c.formatNumber(this.mean())}}}),datasets:[{fillColor:"#0a8cc4",strokeColor:"#0a8cc4",pointColor:"#0a8cc4",pointStrokeColor:"#85bd00",pointHighlightFill:"#85bd00",pointHighlightStroke:"#85bd00",data:t.bins}]};return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},"Distribution of values from ",n.createElement("em",null,this.props.selected_column)),n.createElement("div",{style:{marginTop:87}},n.createElement(r.Bar,{data:l,options:{animation:!1,responsive:!0,tooltipTemplate:function(e){return c.formatNumber(e.value)+e.label.hoverText()},scaleLabel:function(e){return c.formatNumber(parseInt(e.value,10))}}})))}}),v=n.createClass({displayName:"NumericView",statics:{tabName:"Numeric"},render:function(){var e=this.props.sketch,t=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0),a=c.tryGetProperty(e,"quantile",[]),s=c.tryGetProperty(e,"num_unique",20);s=Math.max(2,Math.min(s,20));var r=this.props.histogram?n.createElement(b,{histogram:this.props.histogram.histogram,min:this.props.histogram.min,max:this.props.histogram.max,selected_column:this.props.selected_column}):n.createElement(l.QuantileHistogram,{quantile:a,starting_bins:s,rows:t,selected_column:this.props.selected_column}),i={min:this.props.histogram||e,max:this.props.histogram||e,mean:e,std:e},o=["min","max","mean","std"].map(function(e){var t=[e],a=i[e];return t.push(e in a?c.formatNumber(a[e]):null),t},this).concat([1,25,50,75,99].map(function(t){var a=["quantile("+String(t/100)+") (est.)"];return a.push("quantile"in e&&e.quantile.length>0?c.formatNumber(e.quantile[t]):null),a},this)),u=["table","table-striped","table-bordered","table-condensed","canvas-singlecolumn-table"];return n.createElement("div",null,n.createElement("div",{className:"canvas-singlecolumn-plot",style:{marginRight:30}},r),n.createElement("div",{className:"canvas-sarray-table numeric"},n.createElement("table",{className:u.join(" ")},n.createElement("tbody",null,o.map(function(e,t){return n.createElement("tr",{key:t},e.map(function(e,t){return n.createElement("td",{key:t},e)},this))},this)))))}}),f={getInitialState:function(){return{subcolumn:null,subsketch:null}},updateAsyncState:function(e){this.setState({subcolumn:null,subsketch:null})},getSubsketch:function(e){this.setState({subcolumn:e});var t=new u.ProgressTask("/subsketch/"+e,"sketch_summary().element_sub_sketch()",function(e){this.setState({subsketch:e})}.bind(this),2e3);this.addTask(t.always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";d.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SArray<dict>"})}))},onItemClick:function(e){this.state.subcolumn===e?this.setState(this.getInitialState()):this.getSubsketch(e)}},y=n.createClass({displayName:"DictView",mixins:[p.AsyncState,f],statics:{tabName:"Dictionary"},render:function(){var e=n.createElement(l.Frequency,{data:c.tryGetProperty(this.props.sketch,"keys",{}),width:600,aspectRatio:5,maxValues:50,onItemClick:this.onItemClick,highlightElement:this.state.subcolumn,disabled:this.props.ipython}),t=c.tryGetProperty(this.props.sketch,["values","numeric"],!1),a=t?v:m,r=null===this.state.subsketch?c.tryGetProperty(this.props.sketch,"values",{}):this.state.subsketch,i=null!=this.state.subcolumn?n.createElement("em",null," ",this.state.subcolumn):n.createElement("span",null," all keys"),o=t?n.createElement("span",null,"Distribution of values from"):n.createElement("span",null,"Most frequent values from");return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},"Most frequent keys from ",n.createElement("em",null,this.props.selected_column),", sorted by frequency"),e,n.createElement("hr",null),n.createElement("h3",{style:{marginTop:30,marginBottom:20,height:28}},o,i),n.createElement(a,s({},this.props,{sketch:r,histogram:null,show_title:!1})))}}),g=n.createClass({displayName:"ListView",statics:{tabName:"List"},render:function(){return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},n.createElement("span",null,"Most frequent values in ",n.createElement("em",null,this.props.selected_column)," ",n.createElement("small",null,"(aggregated across all sub-columns)"))),n.createElement(m,s({},this.props,{show_title:!1})))}}),x=n.createClass({displayName:"ArrayView",mixins:[p.AsyncState,f],statics:{tabName:"Array"},onSelect:function(e){var t=e.target.value;"all (aggregate)"===t?this.setState(this.getInitialState()):this.getSubsketch(t)},render:function(){var e=null===this.state.subsketch?this.props.sketch:this.state.subsketch;return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},n.createElement("span",null,"Distribution of values in ",n.createElement("em",null,this.props.selected_column),", all sub-columns (aggregate)")),n.createElement(v,s({},this.props,{sketch:e,histogram:null})))}}),w=n.createClass({displayName:"SArrayTab",render:function(){var e=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);if(0===e)return n.createElement("div",null,n.createElement("h5",null,"No data in this column."));var t=this.props.selected_variable.name,a=Array.isArray(t)?t[t.length-1]:t,r=this.props.view;return n.createElement("div",{className:"tab-content",style:{maxWidth:this.props.windowWidth-240,maxHeight:this.props.ipython?"none":this.props.windowHeight-124,overflow:"auto"}},n.createElement("div",{className:"canvas canvas-view-main sarray"},n.createElement(r,s({},this.props,{selected_column:a}))))}}),k=function(e){return n.createClass({render:function(){return n.createElement(w,s({},this.props,{view:e}))}})},_={Categorical:k(m),Numeric:k(v),Dictionary:k(y),Array:k(x),List:k(g),Images:h};_.View=n.createClass({mixins:[p.AsyncState,p.SizeToWindow],getInitialState:function(e){return e||(e=this.props),1==e.ipython?{sketch:e.sketch}:{sketch:{},histogram:{}}},updateAsyncState:function(e){var t=[],a=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);if(0!==a){var s=c.tryGetProperty(this.props.selected_variable,"dtype");("float"===s||"int"===s)&&t.push(new u.ProgressTask("/histogram/","histogram()",function(e){this.setState({histogram:e})}.bind(this),0)),t.push(new u.ProgressTask("/sketch/","sketch_summary()",function(e){this.setState({sketch:e})}.bind(this),c.getSketchPollInterval(a)).fail(function(){this.canceled&&o.ajax({type:"GET",url:"/cancel_sketch"})})),this.addTask(new u.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";d.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SArray"})}))}},render:function(){var e=p.Tabs,t=this.props.selected_variable.view_components.map(function(e){return[e,_[e]]}.bind(this));return n.createElement(e,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,tabs:t,initialTab:this.props.selected_variable.view_component,histogram:this.state.histogram,sketch:this.state.sketch,windowWidth:this.state.windowWidth,windowHeight:this.state.windowHeight})}}),t.exports=_},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","../plots":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",d3:"d3","react-chartjs":"react-chartjs","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/sframe.jsx":[function(e,t,a){"use strict";var s=function(){function e(e,t){var a=[],s=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e("react/addons"),r=e("d3"),i=e("lodash"),o=(e("bowser"),e("zepto-browserify").$),l=e("../plots"),c=e("../page_layout"),u=e("../common_util"),p=e("../taskqueue"),d=e("../common_controls"),h=e("../logging"),m=e("../table"),b=e("../plot_components/scatter"),v=e("../plot_components/bar"),f=e("../plot_components/boxwhisker"),y=e("../plot_components/heatmap"),g=m.TabularView.getColumns,x=n.createClass({displayName:"SingleColumn",render:function(){var e=u.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);if(0===e)return n.createElement("div",null,n.createElement("h5",null,"No data in this column."));var t=i.memoize(u.formatSArrayValue,JSON.stringify),a=!u.tryGetProperty(this.props.sketch,"numeric",!1),s=u.tryGetProperty(this.props.column,"dtype"),r=[];if("dict"===s){var o=u.tryGetProperty(this.props.sketch,"keys",{}),l=u.tryGetProperty(this.props.sketch,"values",{}),c=u.tryGetProperty(l,"numeric",!1),p=c?"distribution of values (all keys):":"frequent items (all keys):";r.push(n.createElement("div",{key:"dict_summary"},n.createElement("div",{className:"canvas-sframe-summary-plot-title"},"frequent keys:"),n.createElement(k,{data:o,categorical:!u.tryGetProperty(o,"numeric",!1),maxItems:5}),n.createElement("div",{className:"canvas-sframe-summary-plot-title"},p),n.createElement(k,{data:l,categorical:!u.tryGetProperty(l,"numeric",!1),width:32,vertical:!0,maxItems:5})))}else if("Image"!==s){var d=a?"frequent items":"distribution of values";("list"===s||"array"===s)&&(d+=" (all sub-columns)"),r.push(n.createElement("div",{key:"nondict_summary"},n.createElement("div",{className:"canvas-sframe-summary-plot-title"},d,":"),n.createElement(k,{data:this.props.sketch,categorical:a,width:32,vertical:!0,maxItems:12})))}else{var h=u.tryGetProperty(this.props.sketch,"samples",[]);r.push(n.createElement("div",{key:"nondict_summary"},n.createElement("div",{className:"canvas-sframe-summary-plot-title"},"First 4 images:"),h.map(function(e,a){var s=t(e,66);return n.createElement("div",{key:a,style:{paddingBottom:"4px"}},s)})))}var m=!("complete"in this.props.sketch&&this.props.sketch.complete),b="dict"===s?n.createElement(_,{name:"unique keys (est.)",value:u.tryGetProperty(this.props.sketch,["keys","num_unique"]),loading:m}):"Image"!==s?n.createElement(_,{name:"num_unique (est.)",value:this.props.sketch.num_unique,loading:m}):null,v=a?null:["min","max","median","mean","std"].map(function(e,t){return n.createElement(_,{key:t,name:e,value:this.props.sketch[e],loading:!1})}.bind(this)),f="Image"!==s?n.createElement(_,{name:"num_undefined",value:this.props.sketch.num_undefined,loading:m}):null;return n.createElement("div",null,n.createElement("table",{className:"canvas-sframe-inner-table"},n.createElement("tbody",null,n.createElement(_,{name:"dtype",value:s}),b,f,v)),r)}}),w=n.createClass({displayName:"ColumnFrequencyPlot",render:function(){if(!("frequent_items"in this.props.data)||0===this.props.data.frequent_items.length)return n.createElement("div",null);var e=176,t=u.tryGetProperty(this.props,"maxItems",10),a=u.sortFrequentItems(this.props.data.frequent_items,t);if(0===a.length)return n.createElement("div",{className:"canvas-sframe-summary-statistic-name"},"No values appear with ≥ 0.01% occurrence.");var s=r.scale.linear().domain([0,a[0].value.frequency]).range([0,e]);return n.createElement("div",null,n.createElement("table",null,n.createElement("tbody",null,a.map(function(t,a){var r=u.formatSArrayValue(t.value.value,20);return n.createElement("tr",{key:a},n.createElement("td",{style:{position:"relative",width:e,height:22}},n.createElement("div",{style:{position:"absolute",left:0,top:0,width:s(t.value.frequency),height:20,backgroundColor:"rgba(133, 189, 0, 0.2)"}}),n.createElement("div",{style:{paddingLeft:8,paddingRight:8,width:e,height:20,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r)))}.bind(this)))))}}),k=n.createClass({displayName:"SummaryPlot",render:function(){var e=this.props.categorical?w:l.BoxAndWhisker;return n.createElement("div",{className:"canvas-sframe-column-plot"},n.createElement(e,this.props))}}),_=n.createClass({displayName:"SummaryStatistic",render:function(){var e=this.props.value;return this.props.loading?e=n.createElement("span",{style:{position:"relative",marginLeft:30,marginRight:-10}},n.createElement("i",{className:"fa-li fa fa-spinner fa-spin"})):"number"==typeof e&&(e=u.formatNumber(e)),n.createElement("tr",null,n.createElement("td",{className:"canvas-sframe-summary-statistic-name"},this.props.name,": "),n.createElement("td",{className:"canvas-sframe-summary-statistic-value"},e))}}),j=n.createClass({displayName:"SummaryView",mixins:[d.AsyncState],getInitialState:function(e){return e||(e=this.props),e.ipython===!0?{sketch:e.sketch,getColumns:i.memoize(g)}:{sketch:{},getColumns:i.memoize(g)}},updateAsyncState:function(e){return u.tryGetProperty(e,["tab","visible"],void 0)===!1?void this.cancelAllTasks():void this.setState({getColumns:i.memoize(g)},function(){var t=u.tryGetProperty(e.selected_variable,["descriptives","rows"],0);0!==t&&this.addTask(new p.SingleTask("/cached_sketches","cached sketch summaries").done(function(e){var a={},s=[];this.state.getColumns(this.props).forEach(function(n,r){var i=n.name;if(null!==e[i]&&(a[i]=e[i]),null===e[i]||!e[i].complete){var l=u.escapeURL(i);s.push(new p.ProgressTask("/sketch/"+l,'["'+i+'"].sketch_summary()',function(e){var t={};t[i]=e,this.setState({sketch:u.merge(this.state.sketch,t)})}.bind(this),u.getSketchPollInterval(t)).fail(function(){this.canceled&&this.running()&&o.ajax({type:"GET",url:"/cancel_sketch/"+l})}))}}.bind(this)),this.setState({sketch:a},function(){this.addTask(new p.MultiTask(s).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";h.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SFrame"})}))}.bind(this))}.bind(this)))}.bind(this))},render:function(){var e=this.state.getColumns(this.props),t=this.props.ipython?{overflowX:"auto",maxHeight:600}:{height:"auto",width:c.contentWidth(),overflow:"auto"};return n.createElement("div",{style:t},n.createElement("table",{className:"canvas canvas-sframe-table"},n.createElement("thead",null,n.createElement("tr",null,e.map(function(e){return n.createElement("th",{key:e.name,className:"padding"},n.createElement(m.Column,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,name:e.name,ipython:this.props.ipython}))}.bind(this)))),n.createElement("tbody",null,n.createElement("tr",null,e.map(function(e){return n.createElement("td",{key:e.name,className:"padding"},n.createElement(x,{sketch:u.tryGetProperty(this.state.sketch,e.name,{}),column:e,selected_variable:this.props.selected_variable}))}.bind(this))))))}}),E=n.createClass({displayName:"PlotAxisPicker",propTypes:{label:n.PropTypes.string.isRequired,options:n.PropTypes.array.isRequired,selected:n.PropTypes.string.isRequired,onSelect:n.PropTypes.func.isRequired,disabledOptions:n.PropTypes.array.isRequired},render:function(){return n.createElement("div",{style:{display:"inline-block",verticalAlign:"top",marginTop:15,marginLeft:30}},n.createElement("label",null,n.createElement("div",null,this.props.label),n.createElement("select",{style:{minWidth:100},onChange:this.props.onSelect,value:this.props.selected},this.props.options.map(function(e,t){var a=this.props.disabledOptions.indexOf(e)>=0;return n.createElement("option",{key:t,value:e,disabled:a},e)},this))))}}),S=n.createClass({displayName:"PlotCreator",propTypes:{selected_variable:n.PropTypes.object.isRequired,show:n.PropTypes.func.isRequired},plotTypes:[["Scatter Plot","scatter"],["Heat Map","heatmap"],["Bar Chart","bar"],["BoxWhisker Plot","boxwhisker"],["Line Chart","line"]],plotLabels:["Scatter Plot","Heat Map","Bar Chart","Box Whisker","Line Chart"],getInitialState:function(){return this.getAxesAndPlot(this.props)},getAxesAndPlot:function(e){var t=e.selected_variable.view_params,a=t.view,n=this.getColumnNames(e),r=this.getColumnNames(e),o={axis1:t.x,axis2:t.y};if(o.axis1||(o.axis1=u.tryGetProperty(n,0)),o.axis2||(o.axis2=u.tryGetProperty(r,0),o.axis2===o.axis1&&(o.axis2=u.tryGetProperty(r,1))),o.selectedPlotType=[null,null],null!==a){var l=i.find(this.plotTypes,function(e){{var t=s(e,2),n=t[0];t[1]}return n===a});l&&(o.selectedPlotType=l)}return null===o.selectedPlotType[0]&&(o.selectedPlotType=this.choosePlots(this.findColumnByName(o.axis1),this.findColumnByName(o.axis2))[0]),o},componentDidMount:function(){this.drawPlotType(this.state.selectedPlotType)},componentWillReceiveProps:function(e){u.deepEquals(this.props,e)||this.setState(this.getAxesAndPlot(e))},selectAxis:function(e,t){var a={};a[e]=t.target.value,this.setState(a,this.updatePlotTypeSelectionIfNecessary)},drawPlotType:function(e){this.setState({selectedPlotType:e},this.callShow(e))},getDisabledColumnNames:function(){return this.props.selected_variable.columns.filter(function(e){return-1===["int","float","str","datetime"].indexOf(e.dtype)}).map(function(e){return e.name})},choosePlots:function(e,t){var a=this,s=[{x:["int","float"],y:["int","float"]},{x:["int","float"],y:["int","float"]},{x:["int","str"],y:["int","float"]},{x:["int","str"],y:["int","float"]},{x:["datetime","int","float"],y:["int","float"]}];if(s.forEach(function(e,t){return e.type=a.plotTypes[t]}),!e||!t)return[[null,null]];var n=s.filter(function(a){return-1!==a.x.indexOf(e.dtype)&&-1!==a.y.indexOf(t.dtype)}).map(function(e){return e.type});return n.length?n:[[null,null]]},enabledPlots:function(){if(null===this.state.axis1||null===this.state.axis2)return[];var e=this.findColumnByName(this.state.axis1),t=this.findColumnByName(this.state.axis2);return e&&t?this.choosePlots(e,t):[]},updatePlotTypeSelectionIfNecessary:function(){var e=this,t=this.enabledPlots();0===t.length&&this.drawPlotType([null,null]),this.drawPlotType(i.find(t,function(t){return t[0]===e.state.selectedPlotType[0]})?this.state.selectedPlotType:t[0])},getColumnName:function(e){return e.name},getColumnNames:function(e){return e||(e=this.props),e.selected_variable.columns.map(this.getColumnName)},findColumnByName:function(e){var t=this;return i.find(this.props.selected_variable.columns,function(a){return t.getColumnName(a)===e})},callShow:function(e){var t=this;return function(){t.props.show.call(null,e,t.state.axis1,t.state.axis2,t.props.activeTab)}},render:function(){if(!this.state.axis1||!this.state.axis2)return n.createElement("div",{style:{height:86,borderBottom:"1px solid #c5c5c5"}},"SFrame does not contain two columns with supported data types for plotting. The other views of SFrame (Summary and Table) are available.");var e=this.enabledPlots(),t=function(t){return 0===e.length||void 0===i.find(e,function(e){return e[0]===t[0]})};return n.createElement("div",{style:{height:86,borderBottom:"1px solid #c5c5c5"}},n.createElement(E,{label:"X axis",options:this.getColumnNames(),disabledOptions:this.getDisabledColumnNames(),selected:this.state.axis1,onSelect:this.selectAxis.bind(this,"axis1"),style:{marginLeft:70,minWidth:120}}),n.createElement(E,{label:"Y axis",options:this.getColumnNames(),disabledOptions:this.getDisabledColumnNames(),selected:this.state.axis2,onSelect:this.selectAxis.bind(this,"axis2"),style:{marginLeft:70,minWidth:120}}),n.createElement("div",{style:{width:30,display:"inline-block"}}),this.plotTypes.map(function(e,a){var s=e[0]===this.state.selectedPlotType[0],r=t(e);return n.createElement("a",{key:a,style:{paddingLeft:3,paddingRight:12,paddingTop:3,paddingBottom:0,display:"inline-block",pointerEvents:r?"none":null,cursor:r?"default":null},onClick:this.drawPlotType.bind(this,e),href:"javascript:"},n.createElement("img",{src:"/images/sframe_plot_"+e[1]+".png",style:{marginBottom:4,border:s?"2px solid #ff5500":"2px solid transparent",width:66,height:50,filter:r?"grayscale(1)":null,WebkitFilter:r?"grayscale(1)":null}}),n.createElement("div",{style:{fontSize:12,textAlign:"center",color:r?"#aaa":s?"#ff5500":"#0a8cc4"}},this.plotLabels[a]))},this))}}),C=n.createClass({displayName:"PlotsView",propTypes:{selected_variable:n.PropTypes.object.isRequired,ipython:n.PropTypes.bool},getInitialState:function(){return this.calculateState(this.props)||{plotType:null,col1:null,col2:null}},calculateState:function(e){var t={"Scatter Plot":"scatter","Heat Map":"heatmap","Bar Chart":"bar","BoxWhisker Plot":"boxwhisker","Line Chart":"line"},a=u.tryGetProperty(e.selected_variable.view_params,"view");return a?{plotType:[a,t[a]],col1:u.tryGetProperty(e.selected_variable.view_params,"x"),col2:u.tryGetProperty(e.selected_variable.view_params,"y")}:null},componentWillReceiveProps:function(e){if(!u.deepEquals(this.props.selected_variable.name,e.selected_variable.name)||!u.deepEquals(this.props.selected_variable.column_identifiers,e.selected_variable.column_identifiers)||!u.deepEquals(this.props.selected_variable.view_params,e.selected_variable.view_params)||this.props.activeTab!==e.activeTab){var t=this.calculateState(e);t&&this.show(t.plotType,t.col1,t.col2,e.activeTab)}},show:function(e,t,a,s){return s?null===e[0]||void 0===e[1]?void this.setState({plotType:e}):void((this.state.col1!==t||this.state.col2!==a||this.state.plotType[0]!==e[0])&&o.ajax({type:"POST",url:"/plot_params",data:{view:e[0],col1:t,col2:a,col3:null,_xsrf:u.getCookie("_xsrf")},success:function(){this.setState({plotType:e,col1:t,col2:a})}.bind(this)})):void 0},render:function(){var e=n.createElement("div",{style:{paddingTop:20,paddingLeft:"20"}},"X Axis data type must be either numerical (int or float) or categorical (string).",n.createElement("br",null),"Y Axis data type must be numerical (int or float).",n.createElement("br",null),"Reselect the plot axes accordingly.",n.createElement("br",null)),t=this.state.plotType?this.state.plotType[0]:null;null!==t&&(e={"Bar Chart":v.View,"BoxWhisker Plot":f.View,"Line Chart":b["Line Chart"],"Scatter Plot":b["Scatter Plot"],"Heat Map":y.View}[t],e&&(e=n.createElement(e,this.props)));var a=this.props.ipython?void 0:n.createElement(S,{show:this.show,activeTab:this.props.activeTab,selected_variable:this.props.selected_variable});return n.createElement("div",null,a,e)}}),D={Summary:j,Table:m.TabularView,Plots:C},T=Object.keys(D).map(function(e){var t=D[e];return[e,n.createClass({render:function(){return n.createElement("div",null,n.createElement(t,this.props))}})]});D.View=n.createClass({mixins:[d.Modal],shouldComponentUpdate:function(e,t){var a=!u.deepEquals(this.props,e)||!u.deepEquals(this.state,t);return a},render:function(){var e=d.Tabs;return n.createElement("div",null,n.createElement(e,{selectVariable:this.props.selectVariable,selected_variable:u.merge(this.props.selected_variable,{columns:this.props.selected_variable.columns.filter(function(e){return-1!==this.props.selected_variable.view_params.columns.indexOf(e.name)}.bind(this))}),tabs:T,initialTab:this.props.selected_variable.view_component}),this.getModal())}}),t.exports=D},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","../page_layout":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/page_layout.jsx","../plot_components/bar":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/bar.jsx","../plot_components/boxwhisker":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/boxwhisker.jsx","../plot_components/heatmap":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/heatmap.jsx","../plot_components/scatter":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/scatter.jsx","../plots":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx","../table":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/table.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",bowser:"bowser",d3:"d3",lodash:"lodash","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/sgraph.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("d3"),r=e("../plots"),i=e("../common_util"),o=e("../taskqueue"),l=e("../common_controls"),c=e("../logging");t.exports={View:s.createClass({displayName:"View",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(e){return e||(e=this.props),e.ipython?{vertices:i.tryGetProperty(e,"vertices",[]),vertices_labels:i.tryGetProperty(e,"vertices_labels",[]),edges:i.tryGetProperty(e,"edges",[]),edges_labels:i.tryGetProperty(e,"edges_labels",[]),layoutAlgorithm:"forceDirected",positions:i.tryGetProperty(e,"positions",[]),error_type:i.tryGetProperty(e,"error_type",0),error_msg:i.tryGetProperty(e,"error_msg",[])}:{vertices:[],vertices_labels:[],edges:[],edges_labels:[],layoutAlgorithm:"forceDirected",positions:null,error_type:0,error_msg:""}},customLayout:function(e,t){return{vertices:e.map(function(e,t){return i.merge(e,{x:this.state.positions.x[t],y:this.state.positions.y[t]
})}.bind(this)),edges:t.map(function(e){return i.merge(e,{points:[[this.state.positions.x[e.source],this.state.positions.y[e.source]],[this.state.positions.x[e.target],this.state.positions.y[e.target]]]})}.bind(this))}},setLayoutAlgorithm:function(e){var t=e.target.value;this.setState({layoutAlgorithm:t})},getLayoutAlgorithm:function(){return this.state.layoutAlgorithm in r.GraphLayout.layoutAlgorithms?r.GraphLayout.layoutAlgorithms[this.state.layoutAlgorithm]:this.customLayout},shouldComponentUpdate:function(e,t){return!i.deepEquals(this.props,e)||!i.deepEquals(this.state,t)},updateAsyncState:function(e){var t=[];["vertices","edges"].forEach(function(e){t.push(new o.SingleTask("/"+e,"get_"+e+"()").done(function(e,t){var a={};a[e]=t.values,null!==t.labels&&(a[e+"_labels"]=t.labels),"vertices"===e&&(a.positions=t.positions,null!==t.positions&&(a.layoutAlgorithm=JSON.stringify(t.positions.names))),this.setState(a)}.bind(this,e)).fail(function(e,t,a){"undefined"!=typeof e&&413===e.status&&this.setState({error_type:413,error_msg:a})}.bind(this)))}.bind(this)),this.addTask(new o.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";c.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SGraph"})}))},getColor:function(e){return n.rgb(255*e[0],255*e[1],255*e[2]).toString()},scaleNodeSize:function(){return this.props.selected_variable.view_params.node_size/37.5},render:function(){if(0===this.state.vertices.length)return 0!==this.state.error_type?s.createElement("div",{className:"alert alert-info"},this.state.error_msg):s.createElement("div",null);var e=function(){var e={};for(var t in this.props.selected_variable.view_params.highlight)e[t]=this.getColor(this.props.selected_variable.view_params.highlight[t]);return e}.bind(this),t=function(e){var t=this.props.selected_variable.view_params[e];return this.getColor(t)}.bind(this),a=i.merge({vertices:this.state.vertices,edges:this.state.edges,vlabels:null!==this.state.vertices_labels?this.state.vertices_labels:[],vcolor:t("vcolor"),highlight:e(),node_size:this.scaleNodeSize(),elabels:null!==this.state.edges_labels?this.state.edges_labels:[],ecolor:t("ecolor"),layoutAlgorithm:this.getLayoutAlgorithm()},i.partial(this.props.selected_variable.view_params,["vlabel_hover","elabel_hover","ewidth","v_offset","h_offset","arrows"])),n=null===this.state.positions?"forceDirected":JSON.stringify(this.state.positions.names);return s.createElement("div",{className:"tab-content",style:{maxWidth:this.state.windowWidth-240,maxHeight:this.props.ipython?"none":this.state.windowHeight-124,overflow:"auto"}},s.createElement("div",{className:"canvas canvas-view-main sgraph"},s.createElement("div",{className:"canvas-singlecolumn-plot"},null===this.state.positions?null:s.createElement("div",null,s.createElement("label",{htmlFor:"canvas-sgraph-layout-selector"},"Layout algorithm: "),s.createElement("select",{defaultValue:n,onChange:this.setLayoutAlgorithm},s.createElement("option",{value:"forceDirected"},"Force-directed"),s.createElement("option",{value:JSON.stringify(this.state.positions.names)},JSON.stringify(this.state.positions.names)))),s.createElement(r.GraphLayout,a))))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","../plots":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_mixin.jsx":[function(e,t,a){"use strict";function s(e){return e.series&&e.series.length&&e.series[0].data&&e.series[0].data.length?!0:!1}var n=e("react/addons"),r=e("dato-echarts"),i=e("./theme");t.exports={createChart:function(){if(this.chart=r.init(n.findDOMNode(this),i.theme),this.hideChart(),this.chart.setOption(i.defaultOptions),s(this.makeChartOptions(this.props))){var e=!0;this.updateChart(this.props,e)}},hideChart:function(){this.chart.showLoading()},showChart:function(){this.chart.hideLoading()},updateChart:function(e,t){if(!e)return null;var a=this.makeChartOptions(e);this.chart.setOption(a),this.showChart()},componentDidMount:function(){this.createChart()},componentWillUnmount:function(){this.chart.dispose()},shouldComponentUpdate:function(e,t){return!1},componentWillReceiveProps:function(e){var t=!1;this.updateChart(e,t)},render:function(){return n.createElement("div",{style:{height:this.props.height,width:this.props.width}})}}},{"./theme":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/theme.jsx","dato-echarts":"dato-echarts","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx":[function(e,t,a){"use strict";function s(e,t){return Math.min(Math.max(Math.ceil(e/t*100),1),100)}function n(e){return e===parseInt(e,10)}function r(e){return e.every(n)}function i(e){return r(e)&&e[1]>1e3&&e[1]<=9999}function o(e){return e.every(n)&&[0,1].indexOf(e[0])>=0&&[11,12].indexOf(e[1])>=0}function l(e){return e.every(n)&&[0,1].indexOf(e[0])>=0&&[28,30,31,364,365].indexOf(e[1])>=0}function c(e){try{return i(e)||o(e)||l(e)}catch(t){}return!1}function u(e){var t=y(function(e){return b.extent(e.data,function(e){return e[0]})})(e),a=y(function(e){return b.extent(e.data,function(e){return e[1]})})(e);return[t,a]}function p(e,t){t=Boolean(t);var a=u(e),s=m(a,2),n=(s[0],s[1],{xAxis:[{scale:!1,boundaryGap:[.01,.01]}],yAxis:[{scale:!1,boundaryGap:[.01,.01]}]});return t&&(n.xAxis[0].scale=!0),t&&(n.yAxis[0].scale=!0),n}function d(e){try{var t=u(e),a=m(t,2),s=a[0],n=a[1];return{xAxis:[{min:s[0],max:s[1]}],yAxis:[{min:n[0],max:n[1]}]}}catch(r){console.log(r)}return{}}function h(e){var t={};try{{var a=u(e),s=m(a,2),n=s[0],r=s[1];d(e)}i(n)&&(t.xAxis=[{scale:!0,splitNumber:10,axisLabel:{formatter:v}}],t.dataZoom={show:!0},t.toolbox={feature:{restore:{show:!0},dataZoom:{show:!1}}}),i(r)&&(t.yAxis=[{scale:!0,splitNumber:10,axisLabel:{formatter:v}}])}catch(o){console.log(o)}return t}var m=function(){function e(e,t){var a=[],s=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=e("d3"),v=function(e){return e.toString()},f=new Date,y=(f.getFullYear(),function(e){return function(t){return t.reduce(function(t,a){var s=e(a);return[Math.min(t[0],s[0]),Math.max(t[1],s[1])]},[1/0,-(1/0)])}});t.exports={isArrayIntegers:r,isExtentDateish:c,tightExtentsOptions:d,looseExtentsOptions:p,timeOptions:h,calculateZoomEnd:s}},{d3:"d3"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/theme.jsx":[function(e,t,a){"use strict";t.exports={defaultOptions:{toolbox:{show:!0,showTitle:!0,feature:{mark:{show:!1,title:{mark:"Mark Tool",markUndo:"Undo Last Mark",markClear:"Clear Marks"}},dataZoom:{show:!1,title:{dataZoom:"Range Zoom",dataZoomReset:"Undo Zoom"}},dataView:{show:!1,title:"Data View",lang:["Data View","Close","Refresh"]},magicType:{show:!1,title:{line:"Line Chart",bar:"Column Chart",stack:"Stacked",tiled:"Grouped",force:"Force Directed",chord:"Chord",pie:"Pie Chart",funnel:"Funnel"}},restore:{show:!1,title:"Restore"},saveAsImage:{show:!0,title:"Save as Image",lang:["Click to Save"]}}}},theme:{color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],title:{textStyle:{fontWeight:"normal",color:"#008acd"}},dataRange:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{color:["#1e90ff","#1e90ff","#1e90ff","#1e90ff"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee",x:80,y:60,x2:120,y2:60},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},bar:{itemStyle:{normal:{barBorderRadius:5},emphasis:{barBorderRadius:5}}},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},boxwhisker:{itemStyle:{normal:{color:"#8d98b3",colorMedian:"#d87a80",lineStyle:{color:"#8d98b3",colorMedian:"#d87a80"}}}},k:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#d87a80"}}},emphasis:{areaStyle:{color:"#fe994e"}}}},force:{itemStyle:{normal:{linkStyle:{color:"#1e90ff"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}},textStyle:{fontFamily:"Helvetica Neue‘, Arial, Verdana, sans-serif"},animation:!1,addDataAnimation:!1,animationThreshold:250,loadingEffect:"spin",loadingText:"Loading data...",noDataEffect:"spin",noDataText:"Waiting for data"}}},{}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/job_components/job.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=(e("d3"),e("highlight.js")),r=e("../page_layout"),i=(e("../plots"),e("../common_util")),o=e("../taskqueue"),l=e("../common_controls"),c=(e("../logging"),s.createClass({displayName:"LogView",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{log_file_list:[],updating:!1}},updateAsyncState:function(){this.get_log_file_list(),this.setState({updating:!0})},get_log_file_list:function(){this.addTask(new o.SingleTask("/log_file_path_list").done(function(e){var t=i.tryGetProperty(e,"log_file_list",[]);this.setState({log_file_list:t,updating:!1})}.bind(this)))},get_log_file_query:function(e){return"/get_log_file_content?log="+e},render:function(){var e=r.contentWidth()-10,t=800,a=e>t?e:t,n=this.state.log_file_list,i=this.state.updating?s.createElement("div",{key:"spin",style:{padding:"5px"}},s.createElement("i",{className:"fa fa-spinner fa-spin fa-lg"})):s.createElement("div",null);return s.createElement("div",{className:"canvas-job-info-container",style:{width:a}},s.createElement("div",{className:"canvas-job-log-container"},i,n.map(function(e,t){var a=this.get_log_file_query(e);return s.createElement("div",{key:"log_list_"+t},s.createElement("a",{href:a,target:"_blank",key:"a_"+t},e))},this)))}})),u=s.createClass({displayName:"JobInfoList",mixins:[l.SizeToWindow],render:function(){var e=r.contentWidth()-10,t=800,a=e>t?e:t;return s.createElement("div",{className:"canvas-job-info-container",style:{width:a}},s.createElement("table",{className:"canvas-job-info-table"},s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:"canvas-job-info-label"},"Name")),s.createElement("td",null,this.props.jobname)),s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:"canvas-job-info-label"},"Type")),s.createElement("td",null,this.props.jobtype)),s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:"canvas-job-info-label"},"Environment")),s.createElement("td",null,this.props.env.name)),s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:"canvas-job-info-label"},"Environment Type")),s.createElement("td",null,this.props.env.type)),s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:"canvas-job-info-label"},"Start Time")),s.createElement("td",null,this.props.starttime)),s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:"canvas-job-info-label"},"Duration")),s.createElement("td",null,this.props.duration))))}}),p=s.createClass({displayName:"TaskStatusList",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{task_status:{},completed:!1,timeoutId:null}},getStatusFA:function(e){var t=[],a={color:i.getColorFromStatus(e,!1)};return t.push("Completed"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-check fa-lg"}):"Failed"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-times fa-lg"}):"Running"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-spin fa-lg"}):"Canceled"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-ban fa-lg"}):s.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-lg"})),t},getDurationSeconds:function(e){if(1>e)return Math.floor(1e3*e).toString().concat(" ms");var t=e;if(60>=t){var a=Math.round(100*t)/100;return a.toString().concat(" sec")}if(t>60&&3600>=t){var s=Math.floor(t/60),n=t%60,a=Math.round(100*n)/100;return s.toString()+"m "+a.toString()+" sec"}if(t>3600){var r=Math.floor(t/3600),i=t%3600,s=Math.floor(i/60),n=i%60,a=Math.round(100*n)/100;return r.toString()+"h "+s.toString()+"m "+a.toString()+" sec"}},updateAsyncState:function(){this.addTask(new o.SingleTask("/get_task_status","get task status").done(function(e){var t=i.tryGetProperty(e,"task_status",[]);this.setState({task_status:t}),"Pending"==this.props.status||"Running"==this.props.status?this.setState({timeoutId:setTimeout(this.updateAsyncState,3e4)}):clearTimeout(this.state.timeoutId)}.bind(this)))},componentWillUnmount:function(){this.state.timeoutId&&clearTimeout(this.state.timeoutId)},render:function(){var e=this.state.task_status,t=r.contentWidth()-10,a=800,n=t>a?t:a,i=this.props.tasks;return s.createElement("div",{className:"canvas-job-info-container",style:{width:n}},s.createElement("table",{className:"canvas-task-status-table"},s.createElement("tr",null,s.createElement("th",null,"Status"),s.createElement("th",null,"Parameters"),s.createElement("th",null,"Duration")),i.map(function(t,a){var n="Pending",r="-------",i=t.name;if(e.hasOwnProperty(i)){n=e[i].status;var o=e[i].run_time;o&&(r=this.getDurationSeconds(parseFloat(o)))}else"Running"!=this.props.status&&"Pending"!=this.props.status&&(n=this.props.status);var l=this.getStatusFA(n);return s.createElement("tr",{key:a+"_task_row"},s.createElement("td",{key:a+"_task_status"},s.createElement("div",{style:{"float":"left",width:"25px"}},l),s.createElement("div",{style:{"float":"left"}},n),s.createElement("div",{style:{clear:"both"}})),s.createElement("td",{key:a+"_task_inputs"},s.createElement("div",{style:{whiteSpace:"pre-wrap",paddingTop:"12px",paddingBottom:"12px"}},t.inputs)),s.createElement("td",{key:a+"_task_time"},r))},this)))}}),d=s.createClass({displayName:"CodeView",mixins:[l.SizeToWindow],componentDidMount:function(){var e=s.findDOMNode(this);n.highlightBlock(e)},shouldComponentUpdate:function(){return!1},render:function(){var e=r.contentWidth()-10,t=800,a=e>t?e:t,n=this.props.codestr;return s.createElement("div",{className:"canvas-job-info-container",style:{width:a,paddingTop:"0px"}},s.createElement("div",{className:"canvas-job-log-container"},s.createElement("pre",null,s.createElement("code",{className:"python"},n))))}}),h=s.createClass({displayName:"HeaderBar",mixins:[l.SizeToWindow],render:function(){var e=this.props.stat,t=({color:i.getColorFromStatus(e,!1)},r.contentWidth()-10),a=800,n=t>a?t:a,o="fa "+(this.props.view?"fa-angle-double-down":"fa-angle-double-up")+" fa-lg";return s.createElement("div",{className:"canvas-job-task-header",style:{width:n}},s.createElement("div",{className:"canvas-job-timeline-header"},s.createElement("div",{className:"canvas-job-timeline-title pointer no-select",onClick:this.props.callback.bind(null,this.props.label)},s.createElement("i",{className:o}),"  ",this.props.name),s.createElement("div",{style:{clear:"both"}})))}}),m=s.createClass({displayName:"JobHeaderBar",mixins:[l.SizeToWindow],getStatusFA:function(e){var t=[],a={color:i.getColorFromStatus(e,!1)};return t.push("Completed"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-check fa-lg"}):"Failed"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-times fa-lg"}):"Running"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-spin fa-lg"}):"Canceled"==e?s.createElement("i",{key:"infoFA",style:a,className:"fa fa-ban fa-lg"}):s.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-lg"})),t},render:function(){var e=this.props.stat,t={color:i.getColorFromStatus(e,!1)},a=r.contentWidth()-10,n=800,o=a>n?a:n;return s.createElement("div",{className:"canvas-job-task-header",style:{width:o}},s.createElement("div",{className:"canvas-job-timeline-header"},s.createElement("div",{className:"canvas-job-timeline-title"},s.createElement("i",{className:"fa fa-file-text-o fa-lg"}),"  Job Info"),s.createElement("div",{className:"canvas-job-timeline-status"},"STATUS: ",s.createElement("span",{style:t},e)," ",this.getStatusFA(e)),s.createElement("div",{style:{clear:"both"}})))}});t.exports={View:s.createClass({displayName:"View",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{jobInfo:null,status:!0,log:!0,code:!0,statusTimeoutId:null}},handleChangeView:function(e){if(this.state.hasOwnProperty(e)){var t={};t[e]=!this.state[e],this.setState(t)}},getDurationMS:function(e,t){if("Completed"!=t)return"N/A";if(1e3>e)return e.toString().concat(" ms");var a=e/1e3;if(60>=a){var s=Math.round(100*a)/100;return s.toString().concat(" sec")}if(a>60&&3600>=a){var n=Math.floor(a/60),r=a%60,s=Math.round(100*r)/100;return n.toString()+"m "+s.toString()+" sec"}if(a>3600){var i=Math.floor(a/3600),o=a%3600,n=Math.floor(o/60),r=o%60,s=Math.round(100*r)/100;return i.toString()+"h "+n.toString()+"m "+s.toString()+" sec"}},updateAsyncState:function(e){this.addTask(new o.SingleTask("/load_job_info","get job info").done(function(e){var t={};t.jobname=i.tryGetProperty(e,"jobname",[""]),t.packages=i.tryGetProperty(e,"packages",[]),t.code=i.tryGetProperty(e,"code",""),t.tasks=i.tryGetProperty(e,"tasks",[]),t.env=i.tryGetProperty(e,"env",{}),t.status=i.tryGetProperty(e,"status",""),t.jobtype=i.tryGetProperty(e,"jobtype","job"),t.starttime=i.tryGetProperty(e,"starttime",""),t.endtime=i.tryGetProperty(e,"endtime",""),t.has_results=i.tryGetProperty(e,"has_results",!1),t.dns=i.tryGetProperty(e,"dns",""),this.setState({jobInfo:t,statusTimeoutId:setTimeout(this.updateJobStatus,2e4)})}.bind(this)))},updateJobStatus:function(){this.addTask(new o.SingleTask("/load_job_info","get job info").done(function(e){var t=i.tryGetProperty(e,"status","");if("Running"===t||"Pending"===t){var a=i.tryGetProperty(e,"jobtype",""),s=15e3;"HadoopJob"===a&&(s=3e5),this.setState({statusTimeoutId:setTimeout(this.updateJobStatus,s)})}else this.state.statusTimeoutId&&clearTimeout(this.state.statusTimeoutId);var n=this.state.jobInfo;n&&(n.status=t,n.endtime=i.tryGetProperty(e,"endtime",""),this.setState({jobInfo:n}))}.bind(this)))},componentWillUnmount:function(){this.state.statusTimeoutId&&clearTimeout(this.state.statusTimeoutId)},render:function(){var e=this.state.jobInfo;if(null===e)return s.createElement("div",null);var t=e.jobname[0],a=e.tasks,n=e.env,r=e.status,i=e.code,o=e.starttime,l=e.endtime,b=e.jobtype,v=(e.has_results,e.dns),f="";if("Completed"==r&&l&&o){var y=Date.parse(l)-Date.parse(o);f=this.getDurationMS(y,r),o=o.replace("T"," ")}else"Failed"==this.props.jobstatus&&(f="N/A");return s.createElement("div",{className:"tab-content",style:{overflow:"auto",color:"#000",backgroundColor:"#eee"}},s.createElement("div",{className:"canvas canvas-view-main",style:{backgroundColor:"#eee"}},s.createElement(m,{stat:r}),s.createElement(u,{jobname:t,jobtype:b,env:n,starttime:o,duration:f}),s.createElement(h,{name:"Status",view:this.state.status,label:"status",callback:this.handleChangeView}),this.state.status?s.createElement(p,{status:r,tasks:a}):s.createElement("div",null),s.createElement(h,{name:"Logs",view:this.state.log,label:"log",callback:this.handleChangeView}),this.state.log?s.createElement(c,{dns:v,jobtype:b,jobname:t,status:r}):s.createElement("div",null),s.createElement(h,{name:"Code",view:this.state.code,label:"code",callback:this.handleChangeView}),this.state.code?s.createElement(d,{codestr:i}):s.createElement("div",null)))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","../page_layout":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/page_layout.jsx","../plots":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",d3:"d3","highlight.js":"highlight.js","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/job_components/job_session.jsx":[function(e,t,a){"use strict";function s(e,t){if(null==e.starttime&&null==t.starttime)return 0;if(null==t.starttime)return-1;if(null==e.starttime)return 1;var a=Date.parse(e.starttime),s=Date.parse(t.starttime);return s>a?1:a>s?-1:0}function n(e,t){var a=e.name.toLowerCase(),s=t.name.toLowerCase();return a.localeCompare(s)}function r(e,t){var a=e.type,s=t.type;return a.localeCompare(s)}function i(e,t){var a=e.status,s=t.status;return a.localeCompare(s)}function o(e,t){if(null==e.starttime&&null==t.starttime)return 0;if(null==t.starttime)return-1;if(null==e.starttime)return 1;if(null==t.endtime&&null==t.endtime)return 0;if(null==t.endtime)return-1;if(null==e.endtime)return 1;var a=e.starttime.split(".")[0],s=e.endtime.split(".")[0],n=Date.parse(s)-Date.parse(a),r=t.starttime.split(".")[0],i=t.endtime.split(".")[0],o=Date.parse(i)-Date.parse(r);return o>n?1:n>o?-1:0}var l=e("react/addons"),c=(e("d3"),e("../plots"),e("../common_util")),u=e("../taskqueue"),p=e("../common_controls"),d=e("../logging"),h=l.createClass({displayName:"TableColumn",handleClick:function(e){var t=this.props.selected_variable.name.concat([this.props.job.filename]);this.props.selectVariable(t)},getDuration:function(e){var t=e/1e3;if(60>=t){var a=Math.round(100*t)/100;return a.toString().concat(" sec")}if(t>60&&3600>=t){var s=Math.floor(t/60),n=t%60,a=Math.round(n);return s.toString()+"m "+a.toString()+" sec"}if(t>3600){var r=Math.floor(t/3600),i=t%3600,s=Math.floor(i/60),n=i%60,a=Math.round(n);return r.toString()+"h "+s.toString()+"m "+a.toString()+" sec"}},getStatusFA:function(e){var t={color:c.getColorFromStatus(e,!1)},a=[],s=this.props.key;return"Completed"==e?(t={color:"#0a8cc4"},a.push(l.createElement("i",{key:s+"_fa",style:t,className:"fa fa-check fa-lg"}))):"Failed"==e?(t={color:"#B80000"},a.push(l.createElement("i",{key:s+"_fa",style:t,className:"fa fa-times fa-lg"}))):a.push("Running"==e?l.createElement("i",{key:s+"_fa",style:t,className:"fa fa-gear fa-spin fa-lg"}):"Canceled"==e?l.createElement("i",{key:s+"_fa",style:t,className:"fa fa-ban fa-lg"}):l.createElement("i",{key:s+"_fa",style:t,className:"fa fa-gear fa-lg"})),a},render:function(){var e=this.props.key,t=this.props.job,a="------------------",s="------------------",n="------------------";t.starttime&&(n=t.starttime.split(".")[0]),"Completed"==t.status&&t.endtime&&t.starttime&&(a=this.getDuration(Date.parse(t.endtime)-Date.parse(t.starttime)),s=t.endtime.split(".")[0]);var r=function(){return l.createElement("a",{href:"javascript:",key:e+"_name",onClick:this.handleClick,className:"canvas-link"},this.props.job.name)}.bind(this);return l.createElement("tr",{key:e+"_row"},l.createElement("td",{key:e+"_status"},l.createElement("div",{style:{"float":"left",width:"25px"}},this.getStatusFA(t.status)),l.createElement("div",{style:{"float":"left"}},t.status)),l.createElement("td",null,r()),l.createElement("td",null,t.type),l.createElement("td",null,n),l.createElement("td",null,a))}}),m=l.createClass({displayName:"AllJobsTable",mixins:[p.AsyncState],getInitialState:function(){return{sortJobs:"time",orderJobs:!0,jobs:[]}},doSort:function(e,t){return"status"===t?e=e.sort(i):"name"===t?e=e.sort(n):"type"===t?e=e.sort(r):"time"===t?e=e.sort(s):"duration"===t&&(e=e.sort(o)),e},handleSort:function(e){if(e==this.state.sortJobs)this.setState({orderJobs:!this.state.orderJobs,jobs:this.state.jobs.reverse()});else{var t=this.state.jobs;t=this.doSort(t,e),this.setState({sortJobs:e,orderJobs:!0,jobs:t})}},updateAsyncState:function(e){var t=e.list,a=[];t.forEach(function(e,t){a.push(new u.SingleTask("/load_job/"+encodeURIComponent(e),"load job").done(function(e){var t=e.job;if(null!=t){var a=this.state.jobs.concat(t);this.setState({jobs:a})}}.bind(this)))}.bind(this)),this.addTask(new u.MultiTask(a).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";d.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"JobSession"})}))},render:function(){var e="fa fa-sort pointer",t="fa fa-sort-alpha-asc pointer",a="fa fa-sort-alpha-asc pointer",s="fa fa-sort-numeric-desc pointer",n="fa fa-sort-amount-desc pointer",r=this.state.jobs;if(!this.state.orderJobs)if("status"===this.state.sortJobs)var e="fa fa-sort pointer";else if("name"===this.state.sortJobs)var t="fa fa-sort-alpha-desc pointer";else if("type"===this.state.sortJobs)var a="fa fa-sort-alpha-desc pointer";else if("time"===this.state.sortJobs)var s="fa fa-sort-numeric-asc pointer";else if("duration"===this.state.sortJobs)var n="fa fa-sort-amount-asc pointer";return l.createElement("div",{className:"canvas-job-container"},l.createElement("table",{className:"canvas-job-list"},l.createElement("tbody",null,l.createElement("tr",{className:"no-select"},l.createElement("th",null,"Status ",l.createElement("i",{className:e,onClick:this.handleSort.bind(this,"status")})," "),l.createElement("th",null,"Job Name ",l.createElement("i",{className:t,onClick:this.handleSort.bind(this,"name")})," "),l.createElement("th",null,"Job Type ",l.createElement("i",{className:a,onClick:this.handleSort.bind(this,"type")})," "),l.createElement("th",null,"Creation Date ",l.createElement("i",{className:s,onClick:this.handleSort.bind(this,"time")})," "),l.createElement("th",null,"Duration ",l.createElement("i",{className:n,onClick:this.handleSort.bind(this,"duration")})," ")),r.map(function(e,t){return l.createElement(h,{job:e,selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,key:t})}.bind(this)))))}});t.exports={View:l.createClass({displayName:"View",mixins:[p.AsyncState],getInitialState:function(){return{ses:"",jobs:[]}},updateAsyncState:function(e){var t=[];t.push(new u.SingleTask("/list_jobs","get jobs").done(function(e){var t=c.tryGetProperty(e,"jobs",[]);this.setState({jobs:t.reverse()})}.bind(this))),u.add(new u.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";d.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"JobSession"})}))},render:function(){var e=(c.tryGetProperty(this.props.selected_variable,"sessionname","test"),this.state.jobs);return l.createElement("div",{className:"tab-content",style:{overflow:"auto",color:"#000",backgroundColor:"#eee"}},l.createElement("div",{className:"canvas canvas-view-main",style:{backgroundColor:"#eee"}},l.createElement(m,{list:e,selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable})))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","../plots":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx":[function(e,t,a){"use strict";function s(e){o.push(Date.now()),o.push(e)}function n(e,t,a){i.assert("string"==typeof e);var s={metric:e};null!=t&&(i.assert("number"==typeof t),s.value=String(t)),null!=a&&(s.properties=JSON.stringify(a)),s._xsrf=i.getCookie("_xsrf"),r.ajax({type:"POST",url:"/metrics",data:s})}var r=e("zepto-browserify").$,i=e("./common_util"),o=[];t.exports={log:s,get:function(){return o.slice()},reportMetric:n}},{"./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","zepto-browserify":"zepto-browserify"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/confusion_matrix.jsx":[function(e,t,a){"use strict";function s(e,t){for(var a=new Array(e),s=0;e>s;){a[s]=new Array(e);for(var n=0;e>n;)a[s][n++]=t;s++}return a}var n=e("react/addons"),r=e("lodash"),i=10;t.exports=n.createClass({displayName:"exports",mixins:[n.PureRenderMixin],sortedLabels:function(){var e=this.gatherLabels();return r.every(e,function(e){return r.isFinite(parseFloat(e))})?e.sort(function(e,t){return parseFloat(e)-parseFloat(t)}):e.sort(),e},gatherLabels:function(){var e=this.props.confusionMatrix,t=e.reduce(function(e,t){{var a=t.target_label,s=t.predicted_label;t.count}return e.add(String(a)),e.add(String(s)),e},new Set),a=[],s=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(s=(i=o.next()).done);s=!0){var l=i.value;a.push(l)}}catch(c){n=!0,r=c}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw r}}return a},rollupConfusionMatrix:function(){var e=this.props.confusionMatrix,t=this.sortedLabels(),a=t.length,n={};t.forEach(function(e,t){n[e]=t});var r=s(a,0);return e.forEach(function(e){var t=e.target_label,a=e.predicted_label,s=e.count,i=n[String(t)],o=n[String(a)];r[i][o]=s}),{labels:t,data:r}},render:function(){var e=this.rollupConfusionMatrix(),t=e.data,a=e.labels;if(a.length>i)return null;var s=n.createElement("th",{rowSpan:a.length},n.createElement("div",{style:{display:"inline-block"}},"Target Label"));return n.createElement("div",{
style:{marginBottom:20}},n.createElement("table",{className:"confusion-matrix"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{style:{border:"none",background:"white"},colSpan:"2",rowSpan:"2"}),n.createElement("th",{colSpan:a.length,style:{background:"none"}},"Predicted Label")),n.createElement("tr",null,a.map(function(e,t){return n.createElement("th",{key:t},e)})),a.map(function(e,a){return n.createElement("tr",{key:a},0===a?s:null,n.createElement("th",null,e),t[a].map(function(e,t){return n.createElement("td",{key:t,className:t===a?"diagonal":""},e)}))}))))}})},{lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("../common_controls"),r=e("../common_util"),i=e("./model_summary"),o=e("./model_evaluation"),l={Summary:i,Evaluation:o},c=Object.keys(l).map(function(e){var t=l[e];return[e,s.createClass({render:function(){return s.createElement("div",null,s.createElement(t,this.props))}})]});l.View=s.createClass({mixins:[n.Modal],shouldComponentUpdate:function(e,t){var a=!r.deepEquals(this.props,e)||!r.deepEquals(this.state,t);return a},render:function(){var e=n.Tabs;return s.createElement("div",null,s.createElement(e,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,tabs:c,initialTab:this.props.selected_variable.view_component}))}}),t.exports=l},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./model_evaluation":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_evaluation.jsx","./model_summary":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_summary.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_evaluation.jsx":[function(e,t,a){"use strict";function s(e){return b.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},e)}function n(e){return b.createElement("div",{style:{marginTop:0,marginBottom:3,height:28,fontWeight:500,fontSize:17}},e)}function r(e){function t(e){return _.indexOf(e)>=0?_.indexOf(e):j.indexOf(e)?j.indexOf(e)+S:E}var a,s;return e.sort(function(e,n){return a=e[0],s=n[0],t(a)-t(s)}),e}function i(e,t){return v.reject(e,function(e){{var a=m(e,2),s=a[0];a[1]}return t.indexOf(s)>=0})}function o(e,t){return v.filter(e,function(e){{var a=m(e,2),s=a[0];a[1]}return s==t})}function l(e){return i(e,[w,k])}function c(e){return o(e,k)}function u(e){return o(e,w)}function p(e,t){return b.createElement("tr",{key:e},b.createElement("td",null,e),b.createElement("td",null,t))}function d(e,t){return b.createElement("tbody",{key:e},b.createElement("tr",null,b.createElement("th",{colSpan:"2"},n(e))),v.map(t,function(e,t){return b.createElement("tr",{key:t},b.createElement("td",null,t),b.createElement("td",null,e))}),b.createElement("tr",null,b.createElement("td",{rowSpan:"2"}," ")))}function h(e){var t=x,a=[w,k],s=[],n={};return e.forEach(function(e,r){var i=m(e,2),o=i[0],l=i[1];n={},n[t]={},v.pairs(l).forEach(function(e){var s=m(e,2),r=s[0],i=s[1];v.isPlainObject(i)||a.indexOf(r)>=0?n[r]=i:("number"==typeof i&&(i=f.formatNumber(i)),n[t][r]=i)}),0===v.keys(n[t]).length&&delete n[t],s.push([o,n])}),s}var m=function(){function e(e,t){var a=[],s=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=e("react/addons"),v=e("lodash"),f=e("../common_util"),y=e("./confusion_matrix"),g=e("./model_metrics"),x="General Metrics",w="confusion_matrix",k="roc_curve",_=["General Metrics"],j=[k,w],E=1e3,S=5e3;t.exports=b.createClass({displayName:"exports",render:function(){var e=this.props.selected_variable.evaluations;if(!v.isArray(e)||0===e.length)return b.createElement("div",{style:{marginTop:".5em",minHeight:"300"}},"There are no evaluations available for this model.");if(e=h(e),0===e.length)return null;var t=m(e[e.length-1],2),a=t[0],i=t[1],o=r(l(v.pairs(i))),f=c(v.pairs(i)),x=m(f,1),w=x[0],k=null;if(v.isArray(w)){var _=m(w,2),j=_[1];k=b.createElement(g,{data:j})}return b.createElement("div",{style:{marginTop:".5em"}},s(b.createElement("span",null,"Most recent model evaluation with dataset ",b.createElement("em",null,a))),b.createElement("div",{style:{marginLeft:"1em"}},k,b.createElement("table",{className:"canvas-model-summary-table"},b.createElement("tbody",null,o.map(function(e){var t=m(e,2),a=t[0],s=t[1];return v.isPlainObject(s)?d(a,s):p(a,s)}))),v.map(u(v.pairs(i)),function(e){var t=m(e,2),a=t[0],s=t[1],r=void 0;return s&&(r=b.createElement(y,{confusionMatrix:s})),k||!r?null:b.createElement("table",{className:"canvas-model-summary-table",key:a},b.createElement("tbody",null,b.createElement("tr",null,b.createElement("th",{colSpan:"2"},n("Confusion Matrix"))),b.createElement("tr",null,b.createElement("td",{colSpan:"2"},r))))})))}})},{"../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./confusion_matrix":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/confusion_matrix.jsx","./model_metrics":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_metrics.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_metrics.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("lodash"),r=e("../common_util"),i=e("./threshold_slider"),o=e("../plots/line").Line,l=[[0,0],[1,1]],c=n.partial(r.roundToXDecimalPlaces,3);t.exports=s.createClass({displayName:"exports",getInitialState:function(){var e=this.props.data.length/2;return{selectedDataIndex:Math.round(e),selectedDataIndexInverted:this.sliderDataIndexToLineDataIndex(e),shouldShowSelected:!1}},updateSelectedData:function(e){this.setState({selectedDataIndex:e,selectedDataIndexInverted:this.sliderDataIndexToLineDataIndex(e),shouldShowSelected:!0})},hideSelectedBin:function(){this.setState({shouldShowSelected:!1})},sliderDataIndexToLineDataIndex:function(e){return this.props.data.length-1-e},render:function(){if(null===this.props.data)return s.createElement("div",null,"Loading");var e=this.props.data.map(function(e){return n.mapValues(e,c)});e[0].fpr=1,e[0].tpr=1,e[1e3].fpr=0,e[1e3].tpr=0;var t=e.map(function(e){return[e.fpr,e.tpr]}).reverse(),a=400,r=480;return s.createElement("div",null,s.createElement(o,{height:a,width:r,seriesArray:[{name:"Series 1",data:t}],markLineArray:[{name:"Random Baseline",data:l}],xLabel:"False Positive Rate",yLabel:"True Positive Rate",selectedDataIndex:this.state.selectedDataIndexInverted,shouldShowSelected:this.state.shouldShowSelected,useTightExtents:!0,showZoom:!1}),s.createElement(i,{data:e,indexToSelect:this.state.selectedDataIndex,updateSelectionFunc:this.updateSelectedData,hideBinFunc:this.hideSelectedBin}))}})},{"../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../plots/line":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/line.jsx","./threshold_slider":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/threshold_slider.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_objects.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=(e("../common_controls"),e("./model_views").types),r=s.createClass({displayName:"Header",render:function(){return s.createElement("th",null,this.props.text)}});t.exports={View:s.createClass({displayName:"View",render:function(){return s.createElement("div",{className:"canvas canvas-view-main model-objects",style:{backgroundColor:"#eee",paddingLeft:32,paddingRight:32,paddingTop:20}},s.createElement("table",{className:"table table-striped",style:{backgroundColor:"white"}},s.createElement("thead",null,s.createElement("tr",null,s.createElement(r,{text:"Name"}),s.createElement(r,{text:"Type"}))),s.createElement("tbody",null,this.props.variables.map(function(e,t){return e.name.length>1||-1===n.indexOf(e.type)?null:s.createElement("tr",{key:t},s.createElement("td",null,s.createElement("a",{href:"javascript:",onClick:this.props.selectVariable.bind(null,e.name),style:{display:"inline-block",width:"100%"}},e.name[0])),s.createElement("td",null,e.type))},this))))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","./model_views":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_views.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_summary.jsx":[function(e,t,a){"use strict";var s=function(){function e(e,t){var a=[],s=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e("react/addons"),r=(e("lodash"),e("../common_util")),i=n.createClass({displayName:"CoefficientsChart",mixins:[n.PureRenderMixin],render:function(){var e=this.props.coefficients,t=e.length;if(0>=t)return n.createElement("div",null);var a={labels:e.map(function(e,t){return e[0]}),series:[e.map(function(e,t){return e[1]})]};return n.createElement("table",{className:"table table-bordered",style:{width:"auto"}},n.createElement("tbody",null,a.labels.map(function(e,t){return n.createElement("tr",{key:t},n.createElement("th",null,e),n.createElement("td",null,r.formatNumber(a.series[0][t])))})))}});t.exports=n.createClass({displayName:"exports",getHighestPositiveCoefficientsIndex:function(){var e=this.props.selected_variable.attributes.section_titles;return e.indexOf("Highest Positive Coefficients")},getLowestNegativeCoefficientsIndex:function(){var e=this.props.selected_variable.attributes.section_titles;return e.indexOf("Lowest Negative Coefficients")},getCoefficients:function(){var e,t,a=this.props.selected_variable.attributes.sections,s=(this.props.selected_variable.attributes.section_titles,[]),n=[];return e=this.getHighestPositiveCoefficientsIndex(),e>=0&&(s=s.concat(a[e])),t=this.getLowestNegativeCoefficientsIndex(),t>=0&&(n=n.concat(a[t])),s.sort(function(e,t){return t[1]-e[1]}),n.sort(function(e,t){return e[1]-t[1]}),[n,s]},summaryWithoutCoefficients:function(){var e,t,a=this.props.selected_variable.attributes.sections,s=this.props.selected_variable.attributes.section_titles;return e=this.getHighestPositiveCoefficientsIndex(),e>=0&&(s.splice(e,1),a.splice(e,1)),t=this.getLowestNegativeCoefficientsIndex(),t>=0&&(s.splice(t,1),a.splice(t,1)),[a,s]},renderSection:function(e){return e.map(function(e){var t=s(e,2),a=t[0],r=t[1];return n.createElement("tr",{key:a},n.createElement("td",null,a),n.createElement("td",null,r))})},render:function(){var e=this;if("attributes"in this.props.selected_variable&&"sections"in this.props.selected_variable.attributes&&"section_titles"in this.props.selected_variable.attributes){var t=this.props.selected_variable.attributes.sections,a=this.props.selected_variable.attributes.section_titles;if(t.length===a.length){var r=null,o=[],l=[],c=this.getCoefficients(),u=s(c,2);o=u[0],l=u[1];var p=this.summaryWithoutCoefficients(),d=s(p,2);if(t=d[0],a=d[1],l.length>0||o.length>0){r=n.createElement("div",null,n.createElement("div",{style:{fontSize:16,fontWeight:500,marginBottom:3}},"Highest Positive Coefficients"),n.createElement(i,{coefficients:l}),n.createElement("div",{style:{fontSize:16,fontWeight:500,marginBottom:3}},"Lowest Negative Coefficients"),n.createElement(i,{coefficients:o}));var h=this.summaryWithoutCoefficients(),m=s(h,2);t=m[0],a=m[1]}return n.createElement("div",null,n.createElement("div",{style:{marginBottom:".25em",marginTop:".5em"}},n.createElement("table",{className:"canvas-model-summary-table"},a.map(function(a,s){return n.createElement("tbody",{key:a},n.createElement("tr",null,n.createElement("th",{colSpan:"2"},n.createElement("span",{style:{fontSize:16,fontWeight:500,marginBottom:3}},a))),e.renderSection(t[s]),n.createElement("tr",null,n.createElement("td",{colSpan:"2",rowSpan:"2"}," ")))},this))),r)}}}})},{"../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_views.jsx":[function(e,t,a){"use strict";var s=["Model"],n={model:e("./model")};t.exports={views:n,types:s}},{"./model":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model.jsx"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/threshold_slider.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("lodash"),r=e("../common_util"),i=n.partial(r.roundToXDecimalPlaces,3),o="fpr",l="tpr",c="n",u="p",p=function(e){for(var t=n.sortBy(e,o),a=0,s=1;s<t.length;s++)a+=(t[s].fpr-t[s-1].fpr)*t[s].tpr;return a};t.exports=s.createClass({displayName:"exports",propTypes:{data:s.PropTypes.array.isRequired,updateSelectionFunc:s.PropTypes.func.isRequired,indexToSelect:s.PropTypes.number},getInitialState:function(){return{auc:0}},getDefaultProps:function(){return{indexToSelect:0}},sliderChanged:function(e){var t=parseInt(e.target.value,10);this.props.updateSelectionFunc(t)},componentWillMount:function(e){this.setState({auc:p(this.props.data)})},shouldComponentUpdate:function(e){return this.props.indexToSelect!==e.indexToSelect?!0:!1},render:function(){if(null!==this.props.data){var e=this.props.indexToSelect,t=this.props.data[e],a=t[o],n=t[c],r=t[u],p=t[l],d=t.threshold,h=Math.round(p*r),m=Math.round(a*n),b=Math.round(n-m),v=Math.round(r-h),f=(b+h)/(n+r),y=2*h/(2*h+m+v),g=h/(h+m);return s.createElement("div",{className:"canvas-model-metrics-table-slider-container"},s.createElement("table",{className:"canvas-model-metrics-table"},s.createElement("tr",null,s.createElement("th",null,"True Positive"),s.createElement("th",null,"False Negative"),s.createElement("th",null,"Accuracy"),s.createElement("th",null,"Precision")),s.createElement("tr",null,s.createElement("td",null,h),s.createElement("td",null,v),s.createElement("td",null,i(f)),s.createElement("td",null,i(g))),s.createElement("tr",null," "),s.createElement("tr",null,s.createElement("th",null,"False Positive"),s.createElement("th",null,"True Negative"),s.createElement("th",null,"Recall"),s.createElement("th",null,"F1 Score")),s.createElement("tr",null,s.createElement("td",null,m),s.createElement("td",null,b),s.createElement("td",null,i(p)),s.createElement("td",null,i(y)))),s.createElement("div",{className:"canvas-model-metrics-slider-container"},s.createElement("span",null,s.createElement("table",{className:"canvas-model-metrics-table"},s.createElement("tr",null,s.createElement("th",null,"Threshold")),s.createElement("tr",null,s.createElement("td",null,i(d)))),s.createElement("input",{type:"range",min:"0",max:this.props.data.length-1,step:"1",defaultValue:e,onChange:this.sliderChanged,onMouseUp:this.props.hideBinFunc,style:{width:300,marginLeft:10,marginRight:40}}),s.createElement("table",{className:"canvas-model-metrics-table"},s.createElement("tr",null,s.createElement("th",null,"AUC")),s.createElement("tr",null,s.createElement("td",null,i(this.state.auc)))))))}}})},{"../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/page_layout.jsx":[function(e,t,a){"use strict";function s(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}var n=(e("./state"),e("./common_util"),s()),r={colorbar_height:4,breadcrumb_height:55,column_selection_height:56,tab_height:42,left_nav_width:180,view_main_margin_left:20,view_main_margin_right:20,view_main_margin_bottom:20,view_main_padding_top:12,view_main_padding_bottom:12,view_main_content_padding_top:0,view_main_content_padding_bottom:0,table_column_header_height:44,table_nav_width:96,table_vertical_scroll_width:15,table_horizontal_scroll_height:15,view_main_padding_left:15,view_main_border_left:1,view_main_border_right:1,view_main_content_padding_left:0,view_main_content_padding_right:0,windowHeight:n.height,windowWidth:n.width},i={contentWidth:function(){return s().width-(r.left_nav_width+r.view_main_margin_left+r.view_main_padding_left+r.view_main_border_left+r.view_main_border_right+r.view_main_content_padding_left+r.view_main_content_padding_right+r.view_main_margin_right)},contentHeight:function(){return s().height-(r.breadcrumb_height+r.column_selection_height+r.tab_height+r.view_main_padding_top+r.view_main_padding_bottom+r.view_main_margin_bottom)},tableWidth:function(){return i.contentWidth()-(r.table_nav_width+r.table_vertical_scroll_width)},tableHeight:function(){return i.contentHeight()-(r.view_main_content_padding_top+r.view_main_content_padding_bottom+r.table_column_header_height+r.table_horizontal_scroll_height)},get:function(e){return e in r?r[e]:void 0}};t.exports=i},{"./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./state":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/state.jsx"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/bar.jsx":[function(e,t,a){"use strict";function s(e){if(!e||!e.grouped)return[];var t=e.grouped,a=Object.keys(t);if(0===a.length)return[];var s=Object.keys(t[a[0]]),n=s.map(function(e){return{name:e,data:[]}});return a.forEach(function(e){var a=t[e];n.forEach(function(e){var t=e.name;e.data.push(u(a[t])||0/0)})}),{seriesArray:n,categories:a}}var n=e("react/addons"),r=e("lodash"),i=e("../plots/bar").Bar,o=e("../common_util"),l=e("../taskqueue"),c=e("../common_controls"),u=r.partial(o.roundToXDecimalPlaces,3);t.exports={View:n.createClass({mixins:[c.AsyncState],propTypes:{data:n.PropTypes.shape({grouped:n.PropTypes.object,omitted:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.number])}),ipython:n.PropTypes.bool,selected_variable:n.PropTypes.object.isRequired},getInitialState:function(e){e||(e=this.props);var t={seriesArray:[],categories:[],numLabel:e.selected_variable.view_params.y,catLabel:e.selected_variable.view_params.x,width:800,height:500,progress:0};if(e.ipython){var a=s(e.data),n=a.seriesArray,r=a.categories;t.seriesArray=n,t.categories=r}return t},updateAsyncState:function(e){var t=[];t.push(new l.ProgressTask("/bar_values",".values()",function(e){var t=s(e.data),a=t.seriesArray,n=t.categories;this.setState({seriesArray:a,categories:n})}.bind(this))),this.addTask(new l.MultiTask(t))},render:function(){return 0===this.state.seriesArray.length?n.createElement("div",{style:{height:this.state.height,width:this.state.width}}):n.createElement(i,{seriesArray:this.state.seriesArray,categories:this.state.categories,xLabel:this.state.catLabel,yLabel:this.state.numLabel,width:this.state.width,height:this.state.height,showZoom:this.state.categories.length>5})}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../plots/bar":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/bar.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/boxwhisker.jsx":[function(e,t,a){"use strict";function s(e){var t=Object.keys(e);return{categories:t,data:t.map(function(t){var a=e[t].map(function(e){return u(e)});return[a[4],a[6],a[1],a[9],a[5]]})}}var n=e("react/addons"),r=e("lodash"),i=e("../plots/boxwhisker").BoxWhisker,o=e("../common_util"),l=e("../taskqueue"),c=e("../common_controls"),u=r.partial(o.roundToXDecimalPlaces,3);t.exports={View:n.createClass({mixins:[c.AsyncState],propTypes:{selected_variable:n.PropTypes.object.isRequired,data:n.PropTypes.shape({grouped:n.PropTypes.object.isRequired,omitted:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.number])}),ipython:n.PropTypes.bool},getInitialState:function(e){e||(e=this.props);var t={data:[],categories:[],numLabel:e.selected_variable.view_params.y,catLabel:e.selected_variable.view_params.x,width:800,height:500};if(e.ipython){var a=s(e.data.grouped),n=a.data,r=a.categories;t.data=n,t.categories=r}return t},updateAsyncState:function(e){var t=[];t.push(new l.ProgressTask("/boxwhisker_values",".values()",function(e){var t=s(e.data.grouped),a=t.data,n=t.categories;this.setState({data:a,categories:n})}.bind(this))),this.addTask(new l.MultiTask(t))},render:function(){return 0===this.state.data.length?n.createElement("div",{style:{height:this.state.height,width:this.state.width}}):n.createElement("div",{style:{display:"table"}},n.createElement("div",{style:{display:"table-cell"}},n.createElement("div",{style:{"float":"left"}},n.createElement(i,{seriesArray:[{name:this.state.numLabel,data:this.state.data}],categories:this.state.categories,xLabel:this.state.catLabel,yLabel:this.state.numLabel,width:this.state.width,height:this.state.height,showZoom:this.state.categories.length>5})),n.createElement("div",{style:{"float":"right",marginTop:150}},n.createElement("img",{src:"images/boxwhisker_legend.png",height:250,width:143}))))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../plots/boxwhisker":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/boxwhisker.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/heatmap.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("../plots"),r=e("../common_util"),i=e("../taskqueue"),o=e("../common_controls");t.exports={View:s.createClass({mixins:[o.AsyncState],getInitialState:function(e){return e||(e=this.props),{extrema:e.ipython?e.extrema:{},domainToShow:e.ipython?e.domainToShow:{},xLabel:e.selected_variable.view_params.x,yLabel:e.selected_variable.view_params.y,width:500,height:500,shouldShowStopDownload:!1,pointsLoaded:e.ipython?e.pointsLoaded:0,binData:e.ipython?e:{}}},updateAsyncState:function(e){this.setState({numValues:e.selected_variable.descriptives.rows});var t=r.tryGetProperty(e,["selected_variable","view_params"]),a=r.tryGetProperty(t,"x"),s=r.tryGetProperty(t,"y");a&&s&&this.addTask(new i.ProgressTask("/bins",".bins()",function(e){this.setState({shouldShowStopDownload:!e.complete,binData:e,extrema:e.extrema,pointsLoaded:e.pointsLoaded,domainToShow:e.domainToShow})}.bind(this)))},cancelTasks:function(){this.cancelAllTasks(),this.setState({shouldShowStopDownload:!1})},render:function(){var e=null,t=null,a=null;return null==this.state.extrema.minX||null==this.state.domainToShow.minX||null==this.state.binData.bins?s.createElement("div",null," "):(this.state.shouldShowStopDownload&&(t=s.createElement("p",null,"Rows Loaded: ",this.state.pointsLoaded),e=s.createElement("button",{className:"canvas-scatter-stopDownloadButton",type:"button",onClick:this.cancelTasks,style:{color:"red"}},"Stop Retrieving Data"),a=s.createElement("br",null)),s.createElement("div",null,t,e,a,s.createElement("div",{className:"canvas-scatter-title",style:{width:this.state.width,paddingLeft:(this.state.width-325)/2,marginLeft:75}}),s.createElement(n.Heatmap,{bins:this.state.binData.bins,binWidth:this.state.binData.binWidth,binHeight:this.state.binData.binHeight,extrema:this.state.extrema,domainToShow:this.state.domainToShow,xLabel:this.state.xLabel,yLabel:this.state.yLabel,width:this.state.width,height:this.state.height,numValues:this.state.numValues,selectVariable:this.props.selectVariable,plotName:this.props.selected_variable.name[0],ipython:this.props.ipython})))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../plots":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plot_components/scatter.jsx":[function(e,t,a){"use strict";var s,n=e("react/addons"),r=e("lodash"),i=e("../taskqueue"),o=e("../common_controls"),l=e("../plots/scatter").Scatter,c=e("../plots/line").Line,u=(e("../common_util"),n.createClass({displayName:"View",mixins:[o.AsyncState],propTypes:{data:n.PropTypes.array,ipython:n.PropTypes.bool,selected_variable:n.PropTypes.object.isRequired},getInitialState:function(e){return e||(e=this.props),{data:e.ipython?e.data:[],xLabel:e.selected_variable.view_params.x,yLabel:e.selected_variable.view_params.y,width:809,height:500}},updateAsyncState:function(e){this.updateData()},updateData:function(){var e=[];e.push(new i.ProgressTask("/scatter_values",".values()",function(e){this.setState({data:e.data})}.bind(this))),s=new i.MultiTask(e),this.addTask(s)},getDefaultProps:function(){return{lineGraph:!1}},render:function(){if(null===this.state.data)return null;var e=this.state.xLabel+" vs. "+this.state.yLabel;if(this.props.lineGraph){var t=r(this.state.data).sortBy(function(e){return e[0]}).value();return n.createElement(c,{seriesArray:[{name:e,data:t}],xLabel:this.state.xLabel,yLabel:this.state.yLabel,height:this.state.height,width:this.state.width})}return n.createElement(l,{seriesArray:[{name:e,data:this.state.data}],xLabel:this.state.xLabel,yLabel:this.state.yLabel,height:this.state.height,width:this.state.width,showZoom:!1})}}));t.exports={"Line Chart":n.createClass({getDefaultProps:function(){return{lineGraph:!0}},render:function(){return n.createElement(u,this.props)}}),"Scatter Plot":n.createClass({render:function(){return n.createElement(u,this.props)}}),View:u}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../plots/line":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/line.jsx","../plots/scatter":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/scatter.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots.jsx":[function(e,t,a){"use strict";for(var s=e("./common_util"),n=[e("./plots/frequency"),e("./plots/box"),e("./plots/boxes"),e("./plots/quantilehist"),e("./plots/graph"),e("./plots/scatter"),e("./plots/heatmap"),e("./plots/bar")],r={},i=n.length,o=0;i>o;o++)for(var l in n[o])n[o].hasOwnProperty(l)&&(s.assert(!(l in r)),r[l]=n[o][l]);t.exports=r},{"./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./plots/bar":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/bar.jsx","./plots/box":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/box.jsx","./plots/boxes":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/boxes.jsx","./plots/frequency":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/frequency.jsx","./plots/graph":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/graph.jsx","./plots/heatmap":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/heatmap.jsx","./plots/quantilehist":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/quantilehist.jsx","./plots/scatter":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/scatter.jsx"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/bar.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("../echart_components/echart_mixin"),r=e("../echart_components/echart_utils"),i=8;t.exports={Bar:s.createClass({displayName:"Bar",mixins:[n],propTypes:{seriesArray:s.PropTypes.array.isRequired,categories:s.PropTypes.array.isRequired,height:s.PropTypes.number.isRequired,width:s.PropTypes.number.isRequired,xLabel:s.PropTypes.string,yLabel:s.PropTypes.string},componentWillReceiveProps:function(e){this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"bar",data:e.data,yAxisIndex:0}})},makeChartOptions:function(e){var t=e.seriesArray,a="Metrics",s=this.makeDataSeries(t),n=e.xLabel||"",o=e.yLabel||"",l=r.calculateZoomEnd(i,e.categories.length),c={title:{show:!0,text:"Statistics of "+n+" vs. "+o},animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{show:!0,orient:"vertical",x:"right",y:"center",feature:{dataZoom:{show:!1},magicType:{show:!1},restore:{show:!1},saveAsImage:{show:!0,name:"bar_"+n+"_"+o,type:"png"}}},legend:{x:"right",orient:"horizontal",data:t.map(function(e){return e.name}),selected:{sum:!1,count:!0,max:!1,mean:!1,min:!1,std:!1,"var":!1}},xAxis:[{name:n,type:"category",data:e.categories,boundaryGap:!0,splitLine:{show:!1},axisTick:{onGap:!1
}}],yAxis:[{name:a,type:"value"}],series:s,dataZoom:{show:Boolean(e.showZoom)&&Boolean(s[0].data.length),realtime:!0,start:0,end:l}};return c}})}},{"../echart_components/echart_mixin":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_mixin.jsx","../echart_components/echart_utils":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/box.jsx":[function(e,t,a){"use strict";{var s=e("react/addons"),n=e("d3"),r=e("../common_util");e("../common_controls")}t.exports={BoxAndWhisker:s.createClass({displayName:"BoxAndWhisker",transformData:function(e,t,a){for(var s=e.quantile,n=s[0],r=s[25],i=s[50],o=s[75],l=s[100],c=o-r,u=Math.max(n,r-1.5*c),p=Math.min(l,o+1.5*c),d=[],h=[],m=0;m<s.length;m++)s[m]<u&&d.push(s[m]),s[m]>p&&h.push(s[m]);return{minValue:n,maxValue:l,lowOutliers:d,highOutliers:h,lowWhisker:{low:u,high:r},highWhisker:{low:o,high:p},lowBox:{low:r,high:i},highBox:{low:i,high:o},median:{value:i}}},calculateScales:function(e,t,a){var s=n.scale.linear().domain([0,1]).range([0,t.height]),r=n.scale.linear().domain([t.minValue,t.maxValue]).range([10,t.width-10]),i=s,o=n.scale.linear().domain([0,t.maxValue-t.minValue]).range([0,t.width-20]).clamp(!0);return{x:r,y:s,width:o,height:i}},render:function(){var e=null!==r.tryGetProperty(this.props.data,"quantile",null),t=r.tryGetProperty(this.props,"is_inside_svg",!1);if(!e)return t?s.createElement("div",null):s.createElement("g",null);var a=r.tryGetProperty(this.props,"width",152);this.props.vertical&&(a*=6);var n=a/6,i={width:a,height:this.props.vertical?a:n},o=this.props.vertical?"rotate(270deg) translateX(-"+a+"px) translateY("+a/4+"px)":"",l=this.props.vertical?{transform:o,WebkitTransform:o}:{},c={width:a,height:n,maxValue:r.tryGetProperty(this.props,"max_value",this.props.data.max),minValue:r.tryGetProperty(this.props,"min_value",this.props.data.min)},u=this.transformData(this.props.data,c,this.states),p=this.calculateScales(this.props.data,c,this.states),d=s.createElement("g",{className:"BoxAndWhisker",style:l},s.createElement("g",{className:"lowOutliers"},u.lowOutliers.map(function(e,t){return s.createElement("circle",{key:t,cx:p.x(e),cy:p.y(.5),r:2.5,fill:"#85bd00"})})),s.createElement("g",{className:"lowWhisker"},function(e){return s.createElement("g",null,s.createElement("line",{x1:p.x(e.low),x2:p.x(e.low),y1:p.y(0),y2:p.y(1),className:"canvas-boxplot-end"}),s.createElement("line",{x1:p.x(e.low),x2:p.x(e.high),y1:p.y(.5),y2:p.y(.5),className:"canvas-boxplot-line"}))}(u.lowWhisker)),s.createElement("g",{className:"lowBox"},function(e){return s.createElement("rect",{x:p.x(e.low),width:p.width(e.high-e.low),y:p.y(.05),height:p.height(.9),fill:"#85bd00"})}(u.lowBox)),s.createElement("g",{className:"median"},function(e){return s.createElement("rect",{x:p.x(e.value)-.5,width:2,y:p.y(.05),height:p.height(.9),fill:"#fff"})}(u.median)),s.createElement("g",{className:"highBox"},function(e){return s.createElement("rect",{x:p.x(e.low),width:p.width(e.high-e.low),y:p.y(.05),height:p.height(.9),fill:"#85bd00"})}(u.highBox)),s.createElement("g",{className:"highWhisker"},function(e){return s.createElement("g",null,s.createElement("line",{x1:p.x(e.high),x2:p.x(e.high),y1:p.y(0),y2:p.y(1),className:"canvas-boxplot-end"}),s.createElement("line",{x1:p.x(e.low),x2:p.x(e.high),y1:p.y(.5),y2:p.y(.5),className:"canvas-boxplot-line"}))}(u.highWhisker)),s.createElement("g",{className:"highOutliers"},u.highOutliers.map(function(e,t){return s.createElement("circle",{key:t,cx:p.x(e),cy:p.y(.5),r:2.5,fill:"#85bd00"})})));return t?d:s.createElement("div",{className:"canvas-plot-boxandwhisker"},s.createElement("svg",{style:i},d))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/boxes.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("./box"),r=(e("d3"),e("../common_util")),i=e("../common_controls");t.exports={BoxAndWhiskerArray:s.createClass({displayName:"BoxAndWhiskerArray",mixins:[i.Tooltip],render:function(){var e=null!==r.tryGetProperty(this.props.data,"quantile",null),t=r.tryGetProperty(this.props,"is_inside_svg",!1);if(!e)return t?s.createElement("div",null):s.createElement("g",null);var a=r.tryGetProperty(this.props,"width",152),i=r.tryGetProperty(this.props,"height",100),o=this.props.data.subsketch_keys.length,l=a,c=i/o,u=c-2,p={width:a,height:i},d=n.BoxAndWhisker,h=s.createElement("g",{className:"BoxAndWhiskerArray"},this.props.data.subsketches.map(function(e,t){return s.createElement("g",{transform:"translate(0,"+(t*c+1)+")"},s.createElement(d,{data:e,width:l,height:u,is_inside_svg:!0,min_value:this.props.data.min,max_value:this.props.data.max}))},this)),m=this.tooltipMouseOver.bind(this,s.createElement("table",{className:"canvas-sframe-boxplot-tooltip"},[0,1,2,25,50,75,98,99,100].map(function(e){var t=this.props.data.quantile;return s.createElement("tr",{key:e},s.createElement("td",null,"quantile(",e/100,"):"),s.createElement("td",null,r.formatNumber(t[e])))}.bind(this)))),b=this.tooltipMouseOut;return t?h:s.createElement("div",{className:"canvas-plot-boxandwhiskerarray"},s.createElement("svg",{style:p,onMouseOver:m,onMouseOut:b},h),this.getTooltip())}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./box":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/box.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/boxwhisker.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("../echart_components/echart_mixin"),r=e("../echart_components/echart_utils"),i=8;t.exports={BoxWhisker:s.createClass({displayName:"BoxWhisker",mixins:[n],propTypes:{seriesArray:s.PropTypes.array.isRequired,categories:s.PropTypes.array.isRequired,height:s.PropTypes.number.isRequired,width:s.PropTypes.number.isRequired,xLabel:s.PropTypes.string,yLabel:s.PropTypes.string,showZoom:s.PropTypes.bool},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"boxwhisker",data:e.data}})},makeChartOptions:function(e){var t=this.makeDataSeries(e.seriesArray),a=e.xLabel||"",s=e.yLabel||"",n=r.calculateZoomEnd(i,e.categories.length),o={animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{feature:{dataZoom:{show:!1},restore:{show:!1},saveAsImage:{show:!0,name:"boxwhisker_"+a+"_"+s,type:"png"}}},xAxis:[{name:a,type:"category",data:e.categories,boundaryGap:!0,splitLine:{show:!1},axisTick:{onGap:!1}}],yAxis:[{name:s,type:"value",scale:!0,boundaryGap:[.01,.01]}],series:t,dataZoom:{show:Boolean(e.showZoom)&&Boolean(t[0].data.length),realtime:!0,start:0,end:n}};return o}})}},{"../echart_components/echart_mixin":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_mixin.jsx","../echart_components/echart_utils":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/frequency.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("d3"),r=e("../common_util"),i=e("../common_controls");t.exports={Frequency:s.createClass({displayName:"Frequency",mixins:[i.Tooltip],getInitialState:function(){return{hover:null}},getDefaultProps:function(){return{aspectRatio:3,maxValues:30,width:152,onItemClick:null,highlightElement:null}},onMouseOver:function(e,t,a){this.tooltipMouseOver(s.createElement("span",null,r.formatSArrayValue(t.value.value),": ",r.formatNumber(t.value.frequency)," (",r.formatNumber(t.value.frequency/this.props.data.size*100),"%)"),a),this.setState({hover:e}),"onItemHover"in this.props&&this.props.onItemHover(e)},onMouseOut:function(e){this.tooltipMouseOut(e),this.setState({hover:null}),"onItemHover"in this.props&&this.props.onItemHover(null)},render:function(){var e=this.props.aspectRatio,t=[];t="frequent_items"in this.props.data&&Object.keys(this.props.data.frequent_items).length>0?r.sortFrequentItems(this.props.data.frequent_items,this.props.maxValues):[{key:"",value:0}];var a=n.scale.linear().domain([0,t.length]).range([0,e]),i=n.scale.linear().domain([0,t[0].value.frequency]).range([0,1]),o=e/t.length-.01*e,l=[0,0,e,1].join(" "),c="hover"in this.props?this.props.hover:this.state.hover;return s.createElement("div",null,s.createElement("svg",{viewBox:l,width:this.props.width,height:this.props.width/this.props.aspectRatio},t.map(function(e,n){var r=null===this.props.highlightElement||this.props.highlightElement===e.key?1:.3,l=this.props.disabled||null===this.props.onItemClick?null:this.props.onItemClick.bind(null,e.key);return s.createElement("g",{key:n},s.createElement("rect",{width:o,height:i(t[0].value.frequency),x:a(n),y:1-i(t[0].value.frequency),onMouseOver:this.onMouseOver.bind(this,n,e),onMouseOut:this.onMouseOut,fill:"#fff"}),s.createElement("rect",{fill:c===n?"#ff5500":"#0a8cc4",width:o,height:i(e.value.frequency),x:a(n),y:1-i(e.value.frequency),onMouseOver:this.onMouseOver.bind(this,n,e),onMouseOut:this.onMouseOut,onClick:l,style:{opacity:r,cursor:null===l?"default":"pointer",transition:"opacity 0.3s ease"}}))}.bind(this))),this.getTooltip())}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/graph.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=(e("dagre"),e("d3")),r=e("../common_util"),i=(e("../common_controls"),600),o=50,l=s.createClass({displayName:"Edge",render:function(){for(var e=this.props.edge,t=[],a=0;a<e.points.length-1;a++){var n=e.points[a],r=e.points[a+1],i=this.props.scaleX(n[0]),o=this.props.scaleY(n[1]),l=this.props.scaleX(r[0]),c=this.props.scaleY(r[1]),u={key:a,x1:i,y1:o,x2:l,y2:c,style:{stroke:this.props.ecolor,strokeWidth:this.props.ewidth}},p=s.DOM.line(u);if(t.push(p),this.props.arrows&&a==e.points.length-2){var d=l-i,h=c-o,m=h/d,b=5*this.props.ewidth,v=Math.sqrt(d*d+h*h),f=2*b/v,y=(this.props.vertexRadius-2)/v,g=[l-d*y,c-h*y],x=[g[0]-d*f,g[1]-h*f],w=Math.sqrt(b*b*m*m/(m*m+1)),k=-1/m*w,_=[x[0]+w,x[1]+k],j=[x[0]-w,x[1]-k],E=[g,_,j];E=E.map(function(e){return e.join(",")}).join(" "),t.push(s.createElement("polygon",{key:"arrow",points:E,fill:this.props.ecolor,strokeWidth:0}))}}return s.createElement("g",{onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut},t)}}),c=s.createClass({displayName:"Vertex",render:function(){var e=this.props.scaleX(this.props.vertex.x),t=this.props.scaleY(this.props.vertex.y);r.assert(e>=0),r.assert(t>=0);var a=this.props.vcolor;this.props.vertex.value in this.props.highlight&&(a=this.props.highlight[this.props.vertex.value]);var n={onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,r:this.props.vertexRadius,cx:e,cy:t,style:{fill:a}};return s.DOM.circle(n)}}),u=s.createClass({displayName:"Label",render:function(){return s.createElement("g",null,s.createElement("text",{x:this.props.x,y:this.props.y,style:{textAnchor:"middle",fill:"white",stroke:"white",strokeWidth:5,opacity:.9}},this.props.text),s.createElement("text",{x:this.props.x,y:this.props.y,style:{textAnchor:"middle",fill:"black"}},this.props.text))}}),p={forceDirected:function(e,t){for(var a=n.layout.force().nodes(e).links(t).charge(-60).linkDistance(20).start(),s=0;a.alpha()>0&&1e3>s;s++)a.tick();return a.stop(),a.links().map(function(e){e.points=[[e.source.x,e.source.y],[e.target.x,e.target.y]]}),{vertices:a.nodes(),edges:a.links()}}};t.exports={GraphLayout:s.createClass({displayName:"GraphLayout",statics:{layoutAlgorithms:p,layout:function(e){var t=function(t){var a=e.vertices.indexOf(t);return r.assert(-1!=a),a};return e.layoutAlgorithm(e.vertices.map(function(t,a){return{value:t,label:null!==e.vlabels?e.vlabels[a]:null}}),e.edges.map(function(a,s){return{source:t(a[0]),target:t(a[1]),label:null!==e.elabels?e.elabels[s]:null}}))}},getDefaultProps:function(){return{layoutAlgorithm:this.layoutAlgorithms.forceDirected}},getInitialState:function(){return{graph:this.constructor.layout(this.props),vertexHover:null,edgeHover:null}},componentWillReceiveProps:function(e){this.setState({graph:this.constructor.layout(e)})},onVertexMouseOver:function(e){this.setState({vertexHover:e})},onVertexMouseOut:function(){this.setState({vertexHover:null})},onEdgeMouseOver:function(e){this.setState({edgeHover:e})},onEdgeMouseOut:function(){this.setState({edgeHover:null})},render:function(){var e,t,a=this.props.node_size,p=this.state.graph,d=p.vertices.map(function(e){return e.x}),h=p.vertices.map(function(e){return e.y}),m=n.max(d)-n.min(d),b=n.max(h)-n.min(h),v=m/b;v>1?(e=n.scale.linear().domain([n.min(d),n.max(d)]).range([o,i-o]),t=n.scale.linear().domain([n.min(h),n.max(h)]).range([o,(i-o)/v])):(e=n.scale.linear().domain([n.min(d),n.max(d)]).range([o,(i-o)*v]),t=n.scale.linear().domain([n.min(h),n.max(h)]).range([o,i-o]));var f=n.max(h.map(t)),y=function(e){return i-o-(i-2*o-f+t(e))};return s.createElement("div",null,s.createElement("svg",{width:i,height:i},p.edges.map(function(t,n){return s.createElement(l,{key:n,edge:t,ewidth:this.props.ewidth,ecolor:this.props.ecolor,scaleX:e,scaleY:y,arrows:this.props.arrows,vertexRadius:a,onMouseOver:this.onEdgeMouseOver.bind(null,n),onMouseOut:this.onEdgeMouseOut})},this),p.vertices.map(function(t,n){return s.createElement(c,{key:n,vertex:t,vertexRadius:a,vcolor:this.props.vcolor,highlight:this.props.highlight,scaleX:e,scaleY:y,onMouseOver:this.onVertexMouseOver.bind(null,n),onMouseOut:this.onVertexMouseOut})},this),this.props.elabels.map(function(t,a){return this.props.elabel_hover&&this.state.edgeHover!==a?null:s.createElement(u,{key:a,x:e(n.mean(p.edges[a].points.map(function(e){return e[0]}))),y:y(n.mean(p.edges[a].points.map(function(e){return e[1]}))),text:"number"==typeof t?r.formatNumber(t):t})},this),this.props.vlabels.map(function(t,a){return this.props.vlabel_hover&&this.state.vertexHover!==a?null:s.createElement(u,{key:a,x:e(p.vertices[a].x)+this.props.h_offset*i,y:y(p.vertices[a].y)-this.props.v_offset*i,v_offset:this.props.v_offset,h_offset:this.props.h_offset,text:"number"==typeof t?r.formatNumber(t):t})},this)))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx",d3:"d3",dagre:"dagre","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/heatmap.jsx":[function(e,t,a){"use strict";function s(e,t){var a=t(e),s=void 0,n=void 0,r=void 0;.5>a?(s=0,n=2*(1-2*a),n>1&&(n=1)):(n=0,s=4*(a-.5),s>1&&(s=1));var i=Math.abs(a-.5);return r=.25>i?1:4*(.5-i),[Math.floor(255*s),Math.floor(255*r),Math.floor(255*n)]}function n(e,t,a,s){for(var n=a-1;a+1>=n;n++)if(!(0>n||n>=e.length))for(var r=s-1;s+1>=r;r++)0>r||r>=e[a].length||(e[n][r]+=t)}var r=e("react/addons"),i=e("d3"),o=e("../common_util"),l=e("../common_controls"),c=e("../echart_components/echart_utils"),u=75,p=10,d=10,h=1,m=function(e){return i.format(".3g")(e).length>7?i.format(".1g")(e):i.format(".3g")(e)},b=Math.pow(10,6),v=function(e){return c.isArrayIntegers(e)?e.some(function(e){return e>=b})?m:c.isExtentDateish(i.extent(e))?function(e){return parseInt(e,10)}:function(e){return e.toLocaleString()}:m},f=r.createClass({displayName:"AxisLabel",handleClick:function(e){var t=[this.props.plotName,this.props.name];this.props.selectVariable(t)},render:function(){var e=this.props.ipython?this.props.name:r.createElement("a",{href:"javascript:",onClick:this.handleClick},this.props.name);return r.createElement("span",{className:"canvas-heatmap-axesLabel",style:{position:"absolute",top:""+this.props.y+"px",left:""+this.props.x+"px",width:""+this.props.width+"px"}},e)}}),y=r.createClass({displayName:"CanvasFrame",drawFrame:function(e){e.fillStyle="#444444",e.fillRect(u,u,this.props.width,this.props.height),e.fillStyle="#0000FF",e.fillRect(h+u,h+u,this.props.width-2*h,this.props.height-2*h)},drawTicksAndGrid:function(e){var t=void 0;e.lineWidth=1,e.fillStyle="#333333",t=v(this.props.xScale.ticks());for(var a=0;a<this.props.xScale.ticks().length;a++){var s=this.props.xScale.ticks()[a];this.props.gridlinesVisible&&(e.strokeStyle="#999999",e.beginPath(),e.moveTo(u+this.props.xScale(s),u),e.lineTo(u+this.props.xScale(s),u+this.props.height),e.stroke()),e.strokeStyle="#444444",e.beginPath(),e.moveTo(u+this.props.xScale(s),u+this.props.height-d),e.lineTo(u+this.props.xScale(s),u+this.props.height+d),e.stroke(),e.font="12px Helvetica",e.fillText(t(s),u+this.props.xScale(s)-p/2,u+this.props.height+2*d)}t=v(this.props.yScale.ticks());for(var a=0;a<this.props.yScale.ticks().length;a++){var n=this.props.yScale.ticks()[a];this.props.gridlinesVisible&&(e.strokeStyle="#999999",e.beginPath(),e.moveTo(u,u+this.props.yScale(n)),e.lineTo(u+this.props.width,u+this.props.yScale(n)),e.stroke()),e.strokeStyle="#444444",e.beginPath(),e.moveTo(u-p,u+this.props.yScale(n)),e.lineTo(u+p,u+this.props.yScale(n)),e.stroke(),e.font="12px Helvetica",e.fillText(t(n),u/3,u+this.props.yScale(n))}},drawAxis:function(e){e.lineWidth=1;var t=this.props.xScale(0);0>t?t=0:t>this.props.width&&(t=this.props.width),t+=u,e.strokeStyle="#222222",e.beginPath(),e.moveTo(t-1,u),e.lineTo(t-1,u+this.props.height),e.stroke();var a=this.props.yScale(0);0>a?a=0:a>this.props.height&&(a=this.props.height),a+=u,e.strokeStyle="#222222",e.beginPath(),e.moveTo(u,a+1),e.lineTo(u+this.props.width,a+1),e.stroke()},drawBins:function(e){for(var t=this.props.xScale(this.props.binWidth)-this.props.xScale(0),a=this.props.yScale(0)-this.props.yScale(this.props.binHeight),n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=0;i<this.props.bins.length;i++)for(var o=0;o<this.props.bins[i].length;o++)this.props.bins[i][o]>n?n=this.props.bins[i][o]:this.props.bins[i][o]<r&&(r=this.props.bins[i][o]);this.props.heatScale.domain([r,n]).range([0,1]),this.props.heatScale.clamp()&&0===r&&this.props.heatScale.domain([1e-5,n]);for(var i=0;i<this.props.bins.length;i++)for(var o=0;o<this.props.bins[i].length;o++){var l=this.props.bins[i][o],c=this.props.xScale(this.props.binningDomain.minX+i*this.props.binWidth)+u,p=this.props.yScale(this.props.binningDomain.maxY-o*this.props.binHeight)+u;if(!(u-t>c||c>u+this.props.width||u-a>p||p>u+this.props.height)){var d=t,h=a;u>c&&(c=u),p>u+this.props.height-a&&(h=u+this.props.height-p),c>u+this.props.width-t&&(d=u+this.props.width-c),u>p&&(p=u);var m=s(l,this.props.heatScale),b="rgb("+m[0]+","+m[1]+","+m[2]+")";e.fillStyle=b,e.fillRect(c,p,d,h)}}},drawGradientScale:function(e){var t=25,a=200,s=75,n=6,r=e.createLinearGradient(this.props.width+u+5,s,this.props.width+u+30,275);r.addColorStop(0,"rgba(255, 0, 0, 1.000)"),r.addColorStop(.25,"rgba(255, 255, 0, 1.000)"),r.addColorStop(.5,"rgba(0, 255, 0, 1.000)"),r.addColorStop(.75,"rgba(0, 255, 255, 1.000)"),r.addColorStop(1,"rgba(0, 0, 255, 1.000)"),e.fillStyle=r,e.fillRect(this.props.width+u+5,s,t,a),e.font="12px Helvetica",e.strokeStyle="#444444",e.fillStyle="#444444";var i=[0,.5,1].map(this.props.heatScale.invert).map(function(e){return parseInt(e,10)}),o=v(i),l=!0,c=!1,p=void 0;try{for(var d,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value;(isNaN(m)||1e-4>m)&&(m=0);var b=this.props.width+u+t+n,f=(1-this.props.heatScale(m))*a+s;e.fillText(o(m),b,f)}}catch(y){c=!0,p=y}finally{try{!l&&h["return"]&&h["return"]()}finally{if(c)throw p}}e.fillText("point density",this.props.width+u,50)},draw:function(e){this.drawFrame(e),this.drawBins(e),this.drawTicksAndGrid(e),this.drawAxis(e),this.drawGradientScale(e)},componentDidMount:function(){var e=r.findDOMNode(this).getContext("2d");this.draw(e)},componentDidUpdate:function(){var e=r.findDOMNode(this).getContext("2d");e.clearRect(0,0,this.props.width+2*u,this.props.height+2*u),this.draw(e)},render:function(){return r.createElement("canvas",{className:"canvas-heatmap-canvas",width:this.props.width+2*u,height:this.props.height+2*u})}});t.exports={Heatmap:r.createClass({displayName:"Heatmap",getDefaultProps:function(){return{bins:[],binWidth:10,binHeight:10,width:500,height:500,extrema:{minX:0,maxX:10,minY:0,maxY:10},xLabel:"",yLabel:"",numValues:0}},getInitialState:function(){return{heatScale:i.scale.linear(),gridlinesVisible:!0,blurAmount:1,shouldShowBlur:!0}},toggleGridlines:function(){this.setState({gridlinesVisible:!this.state.gridlinesVisible})},changeBlur:function(e){var t=e.target.value;this.setState(0===t?{shouldShowBlur:!1}:{shouldShowBlur:!0}),this.setState({blurAmount:t})},changeHeatFunction:function(e){var t=e.target.value;"linear"===t?this.setState({heatScale:i.scale.linear()}):"log"===t?this.setState({heatScale:i.scale.log().clamp(!0)}):"quadratic"===t?this.setState({heatScale:i.scale.pow().exponent(2)}):"sqrt"===t&&this.setState({heatScale:i.scale.sqrt()})},render:function(){var e=4,t=o.deepCopy(this.props.bins);if(this.state.shouldShowBlur){for(var a=0;e>a;a++)for(var s=o.deepCopy(t),c=0;c<t.length;c++)for(var h=0;h<t[c].length;h++)n(t,this.state.blurAmount*s[c][h]/250,c,h);for(var m=0,c=0;c<t.length;c++)for(var h=0;h<t[c].length;h++)m+=t[c][h];for(var b=0,c=0;c<this.props.bins.length;c++)for(var h=0;h<this.props.bins[c].length;h++)b+=this.props.bins[c][h];for(var c=0;c<t.length;c++)for(var h=0;h<t[c].length;h++)Math.round(t[c][h]*=b/m)}d=this.props.height/50,p=this.props.width/50;var v=this.props.domainToShow.minX,g=this.props.domainToShow.minY,x=this.props.domainToShow.maxX,w=this.props.domainToShow.maxY,k=i.scale.linear().domain([v,x]).range([0,this.props.width]),_=i.scale.linear().domain([g,w]).range([this.props.height,0]),j=l.Slider;return r.createElement("div",{className:"canvas-heatmap-frame"},r.createElement(y,{className:"canvas-heatmap-canvasFrame",width:this.props.width,height:this.props.height,xScale:k,yScale:_,heatScale:this.state.heatScale,bins:t,originalBins:this.props.bins,binWidth:this.props.binWidth,binHeight:this.props.binHeight,binningDomain:this.props.extrema,numValues:this.props.numValues,gridlinesVisible:this.state.gridlinesVisible,shouldShowBlur:this.state.shouldShowBlur}),r.createElement("input",{className:"canvas-heatmap-toggleButton",type:"checkbox",name:"gridlineToggle",onChange:this.toggleGridlines,style:{position:"absolute",top:""+(this.props.height+2*u+25)/2+"px",left:""+(this.props.width+2*u)+"px"}}),r.createElement("p",{className:"canvas-heatmap-toggleLabel",style:{position:"absolute",top:""+(this.props.height+2*u+25)/2+"px",left:""+(this.props.width+2.25*u)+"px",width:"200px"}},"Hide Gridlines"),r.createElement(j,{label:"blur",min:0,max:100,value:this.state.blurAmount,onChange:this.changeBlur}),r.createElement("select",{className:"canvas-heatmap-changeFunction",type:"checkbox",name:"functionSelect",onChange:this.changeHeatFunction,style:{position:"absolute",top:""+(this.props.height+2*u-25)/2+"px",left:""+(this.props.width+2*u)+"px"}},r.createElement("option",{value:"linear"},"Linear"),r.createElement("option",{value:"quadratic"},"Quadratic"),r.createElement("option",{value:"sqrt"},"Square Root"),r.createElement("option",{value:"log"},"Logarithmic")),r.createElement("p",{className:"canvas-heatmap-toggleLabel",style:{position:"absolute",top:""+(this.props.height+2*u-75)/2+"px",left:""+(this.props.width+2*u)+"px",width:"200px"}},"Heat Scaling Function"),[{name:this.props.xLabel,x:u,y:this.props.height+1.5*u,width:this.props.width},{name:this.props.yLabel,x:0,y:u/2.5,width:"auto"}].map(function(e,t){return r.createElement(f,{key:t,name:e.name,selectVariable:this.props.selectVariable,plotName:this.props.plotName,x:e.x,y:e.y,width:e.width,ipython:this.props.ipython})}.bind(this)))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../echart_components/echart_utils":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/line.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("lodash"),r=e("../echart_components/echart_mixin"),i=e("../echart_components/echart_utils"),o=e("../common_util"),l=n.partial(o.roundToXDecimalPlaces,3),c={animation:!1,tooltip:{trigger:"axis",showDelay:0,axisPointer:{type:"cross"},formatter:function(e){return e.value.length>1?e.seriesName+"<br/>"+l(e.value[0])+"  "+l(e.value[1]):e.seriesName+"<br/>"+e.name+" : "+l(e.value)}},toolbox:{feature:{dataZoom:{show:!1},restore:{show:!1}}},xAxis:[{type:"value"}],yAxis:[{type:"value"}],dataZoom:{show:!1,realtime:!1}};t.exports={Line:s.createClass({displayName:"Line",mixins:[r],propTypes:{seriesArray:s.PropTypes.array.isRequired,markLineArray:s.PropTypes.array,height:s.PropTypes.number.isRequired,width:s.PropTypes.number.isRequired,xLabel:s.PropTypes.string,yLabel:s.PropTypes.string,selectedDataIndex:s.PropTypes.number,shouldShowSelected:s.PropTypes.bool,showZoom:s.PropTypes.bool,useTightExtents:s.PropTypes.bool},componentWillReceiveProps:function(e){(e.shouldShowSelected===!0||e.shouldShowSelected!==this.props.shouldShowSelected)&&this.updateChartTooltip(e),this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},updateChartTooltip:function(e){if(this.chart.delMarkPoint(0,"hoverPoint"),e.shouldShowSelected){var t=this.props.seriesArray[0].data[e.selectedDataIndex];return void this.chart.addMarkPoint(0,{clickable:!1,symbol:"circle",symbolSize:6,data:[{xAxis:t[0],yAxis:t[1],name:"hoverPoint"}]})}},makeDataSeries:function(e){return e.map(function(e){return{name:e.name,type:"line",data:e.data,effect:{show:!1}}})},makeChartOptions:function(e){var t=n.cloneDeep(c),a=e.seriesArray,s=e.xLabel||"",r=e.yLabel||"";t.xAxis[0].name=s,t.yAxis[0].name=r;var o;o=e.useTightExtents?i.tightExtentsOptions(a):i.looseExtentsOptions(a),n.isEmpty(o)||(t=n.merge(t,o));var l=i.timeOptions(a);n.isEmpty(l)||(t=n.merge(t,l));var u=this.makeDataSeries(a);return t.series=u,e.markLineArray&&e.markLineArray.length&&e.markLineArray.forEach(function(e){t.series.push({name:e.name,type:"line",effect:{show:!1},data:e.data,itemStyle:{normal:{lineStyle:{color:"#bbb",type:"dashed"}}}})}),t.dataZoom.show=Boolean(e.showZoom),t.toolbox.feature.restore.show=Boolean(e.showZoom),t.toolbox.feature.saveAsImage={show:!0,name:"line_"+s+"_"+r,type:"png"},t}})}},{"../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../echart_components/echart_mixin":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_mixin.jsx","../echart_components/echart_utils":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/quantilehist.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("d3"),r=e("../common_util"),i=e("../common_controls");t.exports={QuantileHistogram:s.createClass({displayName:"QuantileHistogram",mixins:[i.Tooltip],setScale:function(e,t){var a=t.target.value,s={};s[e]=a,this.setState({scale:r.merge(this.state.scale,s)})},setBinCount:function(e){this.setState({binCount:Number(e.target.value)})},getInitialState:function(){return{binCount:null,scale:{x:"linear",y:"linear"}}},render:function(){var e=this.props.quantile.slice();if(0===e.length)return s.createElement("div",null);for(var t=500,a=500,o=.75*t,l=.65*a,c=.175*t,u=.175*a,p=n.min(e),d=n.max(e),h=null!=this.state.binCount?this.state.binCount:this.props.starting_bins,m=n.scale[this.state.scale.x]().domain([1,h+1]).range([p,d]),b=[],v=0,f=0,y=0;h>y;y++){var g=(m(y+1),m(y+2));for(f=0;v<e.length-1&&n.mean([e[v],e[v+1]])<=g;)f++,v++;b.push(f)}r.assert(n.sum(b)===e.length-1);for(var x=n.max(b),w=n.scale.linear().domain([0,h]).range([c,c+o]),k=n.scale.linear().domain([0,x]).range([u,u+l]),_=n.scale.linear().domain([0,.01*x*this.props.rows]).range([u+l,u]),j=n.range(b.length+1),E=_.ticks(7),S=n.formatPrefix(d>2?d/2:d),C=r.siPrefixToShortScale(S.symbol),D=j.map(function(e,t){return{text:n.round(S.scale(m(e+1)),2),idx:t}});D.length>8;)D=D.filter(function(e,t){return t%2===0});var T=.01*x*this.props.rows,N=n.formatPrefix(T>2?T/2:T),L=r.siPrefixToShortScale(N.symbol),P=E.map(N.scale),B=[];B=B.concat.apply(B,b.map(function(e,t){return n.range(e).map(function(e){return[String(w(t))+"px",String(k(x-(e+1)))+"px"]}.bind(this))}.bind(this)));var A=i.Slider,M=function(e,t){var a=r.formatNumber(e),s=r.formatNumber(t);return a===s?" "+a:" between "+a+" and "+s}.bind(this);return s.createElement("div",{className:"canvas-quantile-histogram"},s.createElement("svg",{style:{width:t,height:a},preserveAspectRatio:"xMinYMin"},B.map(function(t,a){return s.createElement("rect",{className:"bar",key:a,width:o/h,height:l/x,x:0,y:0,style:{transform:"translate("+t.join(", ")+")",WebkitTransform:"translate("+t.join(", ")+")"},onMouseOver:this.tooltipMouseOver.bind(this,s.createElement("span",null,"Rows between the ",r.numberWithSuffix(a)," and ",r.numberWithSuffix(a+1)," quantiles have values approximately ",M(e[a],e[a+1]),".")),onMouseOut:this.tooltipMouseOut})}.bind(this)),s.createElement("rect",{x:c,y:u,width:o,height:l,fill:"none",className:"canvas-sarray-plot-axes"}),j.map(function(e,t){var a=w(e),n=l+u;return s.createElement("line",{key:t,x1:a,x2:a,y1:n,y2:n+8,className:"canvas-sarray-plot-axes"})}.bind(this)),D.map(function(e,t){return s.createElement("text",{key:t,x:w(e.idx),y:l+u+20,textAnchor:"middle",className:"canvas-histogram-label"},r.formatNumber(e.text))}.bind(this)),E.map(function(e,t){var a=_(e);return s.createElement("g",{key:t},s.createElement("line",{x1:c-8,x2:c,y1:a,y2:a,className:"canvas-sarray-plot-axes"}),s.createElement("text",{x:c-12,y:a+4,textAnchor:"end",className:"canvas-histogram-label"},r.formatNumber(P[t])))}.bind(this)),s.createElement("text",{x:c+o/2,y:40,textAnchor:"middle",className:"canvas-histogram-title"},"Histogram of quantiles"),s.createElement("text",{x:c,y:u-28,textAnchor:"end",className:"canvas-histogram-axis-title"},"Frequency"),s.createElement("text",{x:c,y:u-12,textAnchor:"end",className:"canvas-histogram-axis-subtitle"},L?"(in "+L+"s)":null)),s.createElement("div",{className:"canvas-histogram-x-axis"},s.createElement("div",null,s.createElement("span",null,this.props.selected_column," ")),s.createElement("div",null,C?"(in "+C+"s)":null)),s.createElement(A,{label:"bins",min:2,max:100,value:h,onChange:this.setBinCount
}),this.getTooltip())}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx",d3:"d3","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/scatter.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("lodash"),r=e("../echart_components/echart_mixin"),i=e("../echart_components/echart_utils"),o=e("../common_util"),l=n.partial(o.roundToXDecimalPlaces,3),c=1999,u={tooltip:{trigger:"item",showDelay:0,backgroundColor:"rgba(0,0,0,0.7)",axisPointer:{show:!0,type:"line",lineStyle:{color:"#bbb",type:"dashed",width:1},crossStyle:{color:"#bbb",width:1,type:"dashed"}},textStyle:{color:"#fff"},formatter:function(e){return e.value.length>1?e.seriesName+"<br/>"+l(e.value[0])+"  "+l(e.value[1]):e.seriesName+"<br/>"+e.name+" : "+l(e.value)}},toolbox:{feature:{restore:{show:!1}}},xAxis:[{type:"value",scale:!0}],yAxis:[{type:"value",scale:!0}],dataZoom:{show:!1,realtime:!1}};t.exports={Scatter:s.createClass({displayName:"Scatter",mixins:[r],propTypes:{seriesArray:s.PropTypes.array.isRequired,height:s.PropTypes.number.isRequired,width:s.PropTypes.number.isRequired,xLabel:s.PropTypes.string,yLabel:s.PropTypes.string,showZoom:s.PropTypes.bool},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"scatter",large:!0,largeThreshold:c,data:e.data}})},makeChartOptions:function(e){var t=n.cloneDeep(u),a=e.seriesArray,s=e.xLabel||"",r=e.yLabel||"";t.xAxis[0].name=s,t.yAxis[0].name=r;var o=i.looseExtentsOptions(a);n.isEmpty(o)||(t=n.merge(t,o));var l=i.timeOptions(a);n.isEmpty(l)||(t=n.merge(t,l));var c=this.makeDataSeries(a);return t.series=c,t.dataZoom.show=Boolean(e.showZoom),t.toolbox.feature.restore.show=Boolean(e.showZoom),t.toolbox.feature.saveAsImage={show:!0,name:"scatter_"+s+"_"+r,type:"png"},t}})}},{"../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../echart_components/echart_mixin":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_mixin.jsx","../echart_components/echart_utils":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/timeline.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("lodash"),r=e("../echart_components/echart_mixin"),i=e("../echart_components/echart_utils"),o={animation:!1,tooltip:{formatter:function(e){var t=new Date(e.value[0]),a=t.getMonth()+1+"-"+t.getDate()+" - "+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes();return a+"<br/>"+e.value[1]}},toolbox:{orient:"horizontal",x:"right",y:"top",feature:{dataZoom:{show:!1},restore:{show:!1}}},grid:{y2:80},xAxis:[{type:"time"}],yAxis:[{type:"value",scale:!0}],dataZoom:{show:!0,realtime:!0,start:0,end:100}};t.exports={Timeline:s.createClass({displayName:"Timeline",mixins:[r],propTypes:{seriesArray:s.PropTypes.array.isRequired,markLineArray:s.PropTypes.array,height:s.PropTypes.number.isRequired,width:s.PropTypes.number.isRequired,title:s.PropTypes.string,xLabel:s.PropTypes.string,yLabel:s.PropTypes.string,showZoom:s.PropTypes.bool},componentWillReceiveProps:function(e){this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},makeDataSeries:function(e){return e.map(function(e){return{name:e.name,type:"line",data:e.data,itemStyle:{normal:{areaStyle:{type:"default"}}},smooth:!0}})},makeChartOptions:function(e){var t=n.cloneDeep(o),a=e.seriesArray,s=(a.map(function(e){return e.name}),e.xLabel||""),r=e.yLabel||"";t.xAxis[0].name=s,t.yAxis[0].name=r;var l=i.timeOptions(a);t=n.merge(t,l);var c=this.makeDataSeries(a);return t.series=c,e.markLineArray&&e.markLineArray.length&&e.markLineArray.forEach(function(e){t.series.push({name:e.name,type:"line",effect:{show:!1},data:e.data,itemStyle:{normal:{lineStyle:{color:"#bbb",type:"dashed"}}}})}),t.toolbox.feature.saveAsImage={show:!0,name:"timeline_"+s+"_"+r,type:"png"},e.title&&(t.title={text:e.title,x:"center",y:"top"}),t}})}},{"../echart_components/echart_mixin":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_mixin.jsx","../echart_components/echart_utils":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/echart_components/echart_utils.jsx",lodash:"lodash","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/ps_components/predservice.jsx":[function(e,t,a){"use strict";function s(e){var t=n(e,2),a=t[0],s=t[1];return[new Date(1e3*a),s]}var n=function(){function e(e,t){var a=[],s=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=e("react/addons"),i=e("../common_util"),o=e("../taskqueue"),l=e("../common_controls"),c=e("../plots/timeline").Timeline,u=r.createClass({displayName:"DeployedPredictiveObjects",render:function(){var e=this.props.deployed;return r.createElement("div",{className:"canvas-ps-deployed-objects"},r.createElement("div",{className:"canvas-ps-deployed-title"},"Deployed Predictive Objects"),r.createElement("table",{className:"canvas-ps-deployed-table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("th",null,"Name"),r.createElement("th",null,"Version")),Object.keys(e).map(function(t,a){var s=e[t].version;return r.createElement("tr",{key:t+"_"+a},r.createElement("td",null,t),r.createElement("td",null,s))},this))))}}),p=r.createClass({displayName:"PendingPredictiveObjects",render:function(){var e=this.props.pending;return 0===Object.keys(e).length?r.createElement("div",null):r.createElement("div",null,r.createElement("div",{className:"canvas-ps-deployed-title"},"Local Pending Changes"),r.createElement("table",{className:"canvas-ps-pending-table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("th",null,"Name"),r.createElement("th",null,"Action"),r.createElement("th",null,"Version")),Object.keys(e).map(function(t,a){var s=e[t],n=s.action,i=s.version;return r.createElement("tr",{key:t+"_"+a},r.createElement("td",null,t),r.createElement("td",null,n),r.createElement("td",null,i))},this))))}}),d=r.createClass({displayName:"PredictiveServiceInfo",getFAState:function(e,t){var a={color:"#85bd00"};return"InService"==e?r.createElement("i",{style:a,className:"fa fa-gear"}):"OutOfService"==e?""==t?(a={color:"#B80000"},r.createElement("i",{style:a,className:"fa fa-times"})):r.createElement("i",{style:a,className:"fa fa-gear fa-spin"}):void 0},getMetricsUrl:function(e){return 0==e.length?r.createElement("div",null):r.createElement("div",{className:"canvas-ps-metrics-container"},r.createElement("a",{className:"canvas-log-button",href:e,target:"_blank"},r.createElement("span",{style:{textDecoration:"underline"}},"View All Metrics"),r.createElement("span",null," ",r.createElement("i",{className:"fa fa-external-link"}))))},render:function(){var e=this.props.ps_s3_endpoint,t=this.props.ps_name,a=this.props.ps_description,s=this.props.ps_api_key,n=this.props.ps_lb_dns;0==a.length&&(a="--------"),0==s.length&&(s="--------");var i=this.props.ps_status,o=this.props.ps_metrics_url;return r.createElement("div",null,r.createElement("div",{className:"canvas-ps-list-title"},r.createElement("span",{style:{"float":"left"}},e),this.getMetricsUrl(o),r.createElement("div",{style:{clear:"both"}})),r.createElement("table",{className:"canvas-ps-info-table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Name:"),r.createElement("td",null),r.createElement("td",null,t)),r.createElement("tr",null,r.createElement("td",null,"Description:"),r.createElement("td",null),r.createElement("td",null,a)),r.createElement("tr",null,r.createElement("td",null,"API key:"),r.createElement("td",null),r.createElement("td",null,s)),r.createElement("tr",null,r.createElement("td",null,"Load Balancer DNS:"),r.createElement("td",null),r.createElement("td",null,n)),r.createElement("tr",null,r.createElement("td",null,"Instance(s) Status:"),r.createElement("td",null),r.createElement("td",null,Object.keys(i).map(function(e,t){var a=i[e],s=a.description;"N/A"===s&&(s="");var n=a.state;return r.createElement("div",{key:e+"_"+t},r.createElement("div",{style:{"float":"left",width:"100px"}},e),r.createElement("div",{style:{"float":"left",paddingRight:"25px"}},this.getFAState(n,s),"  ",n),r.createElement("div",{style:{clear:"both"}}))},this))))))}}),h=r.createClass({displayName:"PSMetrics",render:function(){var e=this.props.metrics;if(!(e.requests_data.length>1))return r.createElement("div",null);var t=e.requests_data[0].map(s);if(!(e.latency_data.length>1))return r.createElement("div",null);var a=e.latency_data[0].map(s);if(!(e.hosts_data.length>1))return r.createElement("div",null);var n=e.hosts_data[0].map(s),i=r.createElement(c,{seriesArray:[{name:"Requests",data:t}],xLabel:"Time",yLabel:"Requests (Count)",width:400*2.2,height:400,title:"Predictive Service Requests",showZoom:!0}),o=r.createElement(c,{seriesArray:[{name:"Latency",data:a}],xLabel:"Time",yLabel:"Latency (Seconds)",width:400*2.2,height:400,title:"Predictive Service Latency",showZoom:!0}),l=r.createElement(c,{seriesArray:[{name:"Number of Healthy Hosts",data:n}],xLabel:"Time",yLabel:"Healthy Hosts (Count)",width:400*2.2,height:400,title:"Number of Healthy Hosts",showZoom:!0});return r.createElement("div",null,r.createElement("div",{style:{paddingBottom:"20px",marginBottom:"40px",borderBottom:"1px solid #e3e3e3"}},i),r.createElement("div",{style:{paddingBottom:"20px",marginBottom:"40px",borderBottom:"1px solid #e3e3e3"}},o),r.createElement("div",null,l))}}),m=r.createClass({displayName:"PredictiveServiceTabs",getContent:function(e){return"Objects"===e?r.createElement("div",null,r.createElement(u,{deployed:this.props.deployed}),r.createElement(p,{pending:this.props.pending})):"Metrics"===e?r.createElement("div",null,r.createElement(h,{metrics:this.props.metrics})):void 0},render:function(){return r.createElement("div",{className:"canvas-ps-wrapper"},this.getContent(this.props.view))}}),b=r.createClass({displayName:"PredictiveServiceView",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{ps_status:{},ps_metrics_url:"blank",view:"Objects",ObjectsColor:{backgroundColor:"#fff",color:"#000"},MetricsColor:{backgroundColor:"#dedede",color:"#0a8cc4"},ps_metrics:{requests_data:[],latency_data:[],hosts_data:[],cache_data:[]}}},changeView:function(e){this.setState({view:e}),this.setState("Objects"===e?{ObjectsColor:{backgroundColor:"#fff",color:"#000"},MetricsColor:{backgroundColor:"#dedede",color:"#0a8cc4"}}:{ObjectsColor:{backgroundColor:"#dedede",color:"#0a8cc4"},MetricsColor:{backgroundColor:"#fff",color:"#000"}})},updateAsyncState:function(){this.addTask(new o.SingleTask("/get_ps_status","get ps status").done(function(e){var t=i.tryGetProperty(e,"ps_status",{}),a=i.tryGetProperty(e,"ps_metrics_url","");this.setState({ps_status:t,ps_metrics_url:a})}.bind(this)).fail(function(){this.setState(this.getInitialState())}.bind(this))),this.addTask(new o.SingleTask("/get_ps_metrics","get ps metrics").done(function(e){var t=i.tryGetProperty(e,"num_requests_data",[]),a=i.tryGetProperty(e,"latency_data",[]),s=i.tryGetProperty(e,"hosts_data",[]),n=i.tryGetProperty(e,"cache_data",[]);this.setState({ps_metrics:{requests_data:t,latency_data:a,hosts_data:s,cache_data:n}})}.bind(this)))},render:function(){var e=i.tryGetProperty(this.props.selected_variable,"ps_info",{}),t=i.tryGetProperty(e,"name",""),a=i.tryGetProperty(e,"s3_endpoint",""),s=i.tryGetProperty(e,"description",""),n=i.tryGetProperty(e,"api_key",""),o=i.tryGetProperty(e,"pending",{}),l=i.tryGetProperty(e,"deployed",{}),c=i.tryGetProperty(e,"lb_dns_name","N/A"),u=this.state.ps_metrics_url,p=this.state.ps_status,h=this.state.ps_metrics;return r.createElement("div",{className:"tab-content",style:{maxWidth:this.state.windowWidth-240,maxHeight:this.state.windowHeight-124,overflow:"auto",color:"#000",minHeight:this.state.windowHeight-100}},r.createElement("div",{className:"canvas canvas-view-main"},r.createElement("div",{className:"canvas-ps-info-container"},r.createElement(d,{ps_name:t,ps_s3_endpoint:a,ps_description:s,ps_api_key:n,ps_status:p,ps_lb_dns:c,ps_metrics_url:u})),r.createElement("div",{className:"canvas-ps-tab"},r.createElement("div",{className:"canvas-ps-tab-element no-select",style:this.state.ObjectsColor,onClick:this.changeView.bind(null,"Objects")},"Predictive Objects"),r.createElement("div",{className:"canvas-ps-tab-element no-select",style:this.state.MetricsColor,onClick:this.changeView.bind(null,"Metrics")},"Metrics")),r.createElement("div",null,r.createElement(m,{view:this.state.view,deployed:l,pending:o,metrics:h}))))}});t.exports={View:b}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../plots/timeline":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/plots/timeline.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/ps_components/ps_session.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("../common_util"),r=e("../common_controls"),i=e("../taskqueue"),o=s.createClass({displayName:"AllPredictiveServices",handleClick:function(e){var t=this.props.selected_variable.name.concat([e]);this.props.selectVariable(t)},render:function(){var e=this.props.list,t=function(e){return s.createElement("a",{href:"javascript:",onClick:this.handleClick.bind(this,e),className:"canvas-link"},e)}.bind(this);return s.createElement("div",{className:"canvas-job-container"},s.createElement("table",{className:"canvas-ps-list-table"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("th",null,"Name"),s.createElement("th",null,"S3 Endpoint")),e.map(function(e,a){{var n=e.State_path,r=e.Name;e.Index}return s.createElement("tr",{key:a},s.createElement("td",null,t(r)),s.createElement("td",null,n))},this))))}});t.exports={View:s.createClass({displayName:"View",mixins:[r.SizeToWindow,r.AsyncState],getInitialState:function(){return{list:[]}},updateAsyncState:function(){this.addTask(new i.SingleTask("/get_ps_list").done(function(e){var t=n.tryGetProperty(e,"list",[]);this.setState({list:t})}.bind(this)))},render:function(){var e=this.state.list;return s.createElement("div",{className:"tab-content",style:{overflow:"auto",color:"#000",backgroundColor:"#eee"}},s.createElement("div",{className:"canvas canvas-view-main",style:{backgroundColor:"#eee"}},s.createElement(o,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,list:e})))}})}},{"../common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","../common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","../taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx","react/addons":"react/addons"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/state.jsx":[function(e,t,a){"use strict";var s=(e("./common_util"),[]);t.exports={addListener:function(e){s.push(e)},set:function(e){for(var t=0;t<s.length;t++)s[t].setState(e)}}},{"./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/table.jsx":[function(e,t,a){"use strict";var s=e("react/addons"),n=e("d3"),r=e("lodash"),i=e("bowser"),o=e("zepto-browserify").$,l=e("./page_layout"),c=e("./common_util"),u=e("./taskqueue"),p=e("./common_controls"),d=e("./logging"),h={grab:i.webkit?"-webkit-grab":"grab",grabbing:i.webkit?"-webkit-grabbing":"grabbing"},m=function(e){var t=c.tryGetProperty(e.selected_variable,"columns",[]),a=c.tryGetProperty(e.selected_variable,["view_params","columns"],[]);return r(t).filter(function(e){return-1!==a.indexOf(e.name)}).sortBy(function(e){return a.indexOf(e.name)}).value()},b=function(e){return{"int":150,"float":150,str:260,dict:260,list:260,array:260,Image:140,datetime:220}[e]},v=function(e,t){return e.reduce(function(e,t){return e+b(t.dtype)},t+1)},f=s.createClass({displayName:"Column",handleClick:function(e){var t=this.props.selected_variable.name.concat([this.props.name]);this.props.selectVariable(t)},render:function(){var e=function(){return this.props.ipython?this.props.name:s.createElement("a",{href:"javascript:",onClick:this.handleClick,className:"canvas-sframe-column-title"},this.props.name)}.bind(this);return s.createElement("div",{className:"canvas-sframe-column-header",style:this.props.style},e())}}),y=s.createClass({displayName:"DocScroller",getInitialState:function(){return{dragOffsetPosition:0,dragStartPosition:null,dragPosition:0}},getDefaultProps:function(){return{onDragEnd:function(){},dragPosition:0,totalRows:0,pageHeight:0,totalHeight:0,height:0,width:0,visualPadding:0,marginTop:0}},componentWillMount:function(){this.setState({dragPosition:this.props.dragPosition||0})},render:function(){var e=function(e){e.preventDefault(),e.stopPropagation(),this.setState({dragStartPosition:e.clientY})}.bind(this),t=function(e){if(null===this.state.dragStartPosition)return null;var t=e.clientY-this.state.dragStartPosition,a=Math.min(this.props.height-this.props.pageHeight,Math.max(0,this.state.dragPosition+t));return a}.bind(this),a=function(e){null!==this.state.dragStartPosition&&(e.preventDefault(),e.stopPropagation(),this.setState({dragOffsetPosition:t(e)}))}.bind(this),r=function(e){if(e.preventDefault(),e.stopPropagation(),null!==this.state.dragStartPosition){var a=t(e);this.props.onDragEnd(a),this.setState({dragStartPosition:null,dragOffsetPosition:a,dragPosition:a})}}.bind(this),i=function(e){if(null===this.state.dragStartPosition){e.preventDefault(),e.stopPropagation();var t=Math.max(0,e.clientY-o(e.currentTarget).offset().top-this.props.pageHeight/2),a=Math.min(this.props.height-this.props.pageHeight,t);this.props.onDragEnd(t),this.setState({dragOffsetPosition:a})}else r(e)}.bind(this),l=[[0,this.state.dragOffsetPosition],[0,this.state.dragOffsetPosition+this.props.pageHeight+this.props.visualPadding],[50,this.props.totalHeight+this.props.marginTop+this.props.visualPadding],[50,this.props.marginTop]],u=this.props.totalRows<=this.props.threshold,p=u?"#dfe0e1":"#85bd00";return 0===this.props.width?null:s.createElement("div",{style:{width:this.props.width}},s.createElement("div",{style:{paddingTop:5},className:"canvas-docscroller-label"},"0"),s.createElement("svg",{style:{width:10,height:this.props.height}},n.range(10).map(function(e){var t=e/9*this.props.height;return s.createElement("line",{key:e,x1:4,x2:10,y1:t,y2:t,stroke:"#dfe0e1",strokeWidth:2})}.bind(this))),s.createElement("div",{style:{width:36,height:this.props.height+this.props.visualPadding,display:"inline-block",cursor:u?"auto":"pointer",position:"relative"},onMouseMove:a,onMouseLeave:r,onClick:i},s.createElement("svg",{style:{position:"absolute",top:0,left:0,width:36,height:this.props.height}},s.createElement("rect",{x:0,y:this.state.dragOffsetPosition,width:36,height:this.props.pageHeight+this.props.visualPadding,fill:"#d9e3cd",style:{opacity:u?0:1}}),n.range(this.props.height/5).map(function(e){return n.range(5).map(function(t){var a="#dfe0e1";return 5*e>=this.state.dragOffsetPosition&&5*e+4<=this.state.dragOffsetPosition+this.props.pageHeight&&(a=p),s.createElement("rect",{key:String(t)+"_"+String(e),x:6+5*t,y:5*e,width:4,height:4,fill:a})}.bind(this))}.bind(this))),s.createElement("div",{style:{position:"absolute",top:this.state.dragOffsetPosition,left:0,width:36,height:this.props.pageHeight+this.props.visualPadding,cursor:u?"auto":null!==this.state.dragStartPosition?h.grabbing:h.grab},onMouseDown:e})),s.createElement("svg",{style:{width:50,height:this.props.height+this.props.visualPadding+10,display:"inline-block",verticalAlign:"top",opacity:u?0:1}},s.createElement("linearGradient",{id:"docScrollerGradient"},s.createElement("stop",{offset:"0%",style:{stopColor:"#d9e3cd"}}),s.createElement("stop",{offset:"100%",style:{stopColor:"#f0f4ec"}})),s.createElement("polygon",{points:l.map(function(e){return e.join(",")}).join(" "),style:{fill:"url(#docScrollerGradient)"}})),s.createElement("div",{style:{marginTop:-10},className:"canvas-docscroller-label"},c.formatNumber(this.props.totalRows-1)))}}),g=s.createClass({displayName:"RowView",getDefaultProps:function(){return{columns:[],data:[],dimensions:{},rowHeight:38,imageRowHeight:66,headerHeight:l.get("table_column_header_height"),highlight:!1,onClick:function(){},formatter:function(e){return e}}},statics:{highlightStyle:{backgroundColor:"rgba(255, 85, 0, 0.2)"},getHeaderCellStyle:function(e,t){var a={height:e-2,minHeight:e-2,maxHeight:e-2};return"object"==typeof t?c.merge(a,t):a},getCellStyle:r.memoize(function(e,t){var a={overflow:"hidden",textAlign:"left"};return t&&(a=c.merge(g.highlightStyle,a)),"object"==typeof e?c.merge(a,e):a},function(e,t){return JSON.stringify({s:e,h:t})}),getCellContentStyle:r.memoize(function(e){return c.merge({padding:"5px 5px 5px 15px"},e||{})},function(e){return JSON.stringify({s:e})})},getRowHeaderHTML:function(e,t){var a={color:"#85bd00",fontWeight:300,paddingLeft:3,height:t};return this.props.highlight&&(a=c.merge(g.highlightStyle,a)),s.createElement("td",{style:a},c.formatNumber(e))},render:function(){var e,t,a,n=this.props.number,r=this.props.data,i=this.getRowHeaderHTML(n,this.props.rowHeight),o=g.getCellStyle({},this.props.highlight);return r&&r.length<this.props.columns.length&&(r=this.props.columns.map(function(e,t){return r[t]||null})),a=void 0===r?this.props.columns.map(function(e,t){return s.createElement("td",{className:"padding canvas-sframe-table-head-value"})},this):s.createElement("div",null,i,r.map(function(a,n){return e=this.props.formatter(a,this.props.rowHeight),t=c.isSArrayImageType(a)?{margin:"0 auto"}:null,s.createElement("td",{key:n,className:"padding canvas-sframe-table-head-value",style:o},s.createElement("div",{style:g.getCellContentStyle(t)},e))},this)),s.createElement("tr",{key:n,className:"canvas-sframe-table-head-row",onClick:this.props.onClick},a)}}),x=s.createClass({displayName:"TabularView",mixins:[p.AsyncState,p.SizeToWindow],statics:{getColumns:m},getDefaultProps:function(){return{rowHeight:38,imageRowHeight:66,headerHeight:l.get("table_column_header_height"),rowsToFetch:300}},getInitialState:function(){return{rows:[],rowStart:0,scrollTop:0,scrollLeft:0,currentTask:null,taskTimeout:null,pageOffset:0,highlightRow:null,getColumnWidth:r.memoize(b),getColumns:r.memoize(m),getTableWidth:r.memoize(v)}},updateAsyncState:function(e){this.setState({getColumnWidth:r.memoize(b),getColumns:r.memoize(m),getTableWidth:r.memoize(v)},function(){var t=[];0!==c.tryGetProperty(e.selected_variable,["descriptives","rows"],0)&&(t.push(new u.SingleTask("/rows/"+String(this.state.rowStart)+"/"+String(this.props.rowsToFetch+this.state.rowStart),".head()").done(function(e){this.setState({rows:e.values})}.bind(this))),this.addTask(new u.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";d.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SFrame"})})))}.bind(this))},scrollTable:function(e){var t=o(e.target).scrollTop(),a=o(e.target).scrollLeft();this.setState({scrollTop:t,scrollLeft:a})},docScrollTable:function(e){this.setState({pageOffset:e})},componentDidUpdate:function(e,t){if(this.state.scrollTop!==t.scrollTop||this.state.pageOffset!==t.pageOffset){var a=s.findDOMNode(this.refs.tableScrollContainer);o(a).scrollTop(this.state.scrollTop),o(a).scrollLeft(this.state.scrollLeft),this.updateTable()}},updateTable:function(){var e=this.getDimensions();if(e.currentRowStart>this.state.rowStart+this.props.rowsToFetch-50||Math.max(e.currentRowStart-5,0)<this.state.rowStart){var t=Math.max(e.currentRowStart-50,0);if(t!==this.state.rowStart){var a=new u.SingleTask("/rows/"+String(t)+"/"+String(t+this.props.rowsToFetch)).done(function(e){this.setState({rows:e.values,rowStart:t,currentTask:null})}.bind(this)).fail(function(){this.setState({currentTask:null})}.bind(this));null!==this.state.taskTimeout&&clearTimeout(this.state.taskTimeout),null!==this.state.currentTask&&this.state.currentTask.cancel(),this.setState({currentTask:a,taskTimeout:setTimeout(function(){a.run()},200)})}}},getDimensions:function(e,t){"undefined"==typeof e&&(e=this.state.scrollTop),"undefined"==typeof t&&(t=this.state.pageOffset);var a=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0),s=1e5,n=l.get("table_nav_width"),r=l.tableHeight(),i=this.props.headerHeight,o=r-24-10,u=Math.min(1,s/a)*o,p=Math.max(0,10-u),d=l.tableWidth(),h=this.state.getColumns(this.props),m=h.some(function(e){return"Image"===e.dtype})?this.props.imageRowHeight:this.props.rowHeight,b=Math.min(a,s),v=Math.ceil(t/o*a),f=v+Math.floor(e/m);f-=f%2;var y=Math.ceil(r/m)+3,g=f+y,x=Math.min(y,this.state.rowStart-f),w=Math.min(y,g-(this.state.rowStart+this.props.rowsToFetch)),k=(f-v)*m,_=Math.max(0,(b-(g-v))*m),j=18+Math.floor(10*Math.log(a)/Math.LN10),E=Math.min(d,this.state.getTableWidth(h,j+1));return y>a&&(f=0,g=a,x=0,k=0,_=0,w=0),{elementHeight:r,currentRowStart:f,currentRowEnd:g,fillerAbove:x,fillerBelow:w,heightAbove:k,heightBelow:_,rowHeaderWidth:j,tableWidth:E,docScrollerWidth:n,docScrollerHeight:o,docScrollerPageHeight:u,docScrollerVisualPadding:p,rowsInView:b,columnHeaderHeight:i,rowHeight:m,totalRows:a,docScrollerThreshold:s}},highlightRow:function(e){e===this.state.highlightRow&&(e=null),this.setState({highlightRow:e})},onDocScroll:function(e){this.setState({pageOffset:e})},goToRowChange:function(e){var t=null,a=this.getDimensions();try{t=parseInt(s.findDOMNode(this.refs.goToRow).value,10)}catch(n){return}var a=this.getDimensions(),r=a.totalRows-a.rowsInView,i=0;0>t?t=a.totalRows+t:t>a.totalRows-1&&(t=a.totalRows-1);var o=t/a.totalRows*a.docScrollerHeight;if(t>r){var l=t-r;o=r/a.totalRows*a.docScrollerHeight,i=l/a.rowsInView*a.rowsInView*a.rowHeight}this.setState({scrollTop:i,pageOffset:o})},handleKeyDown:function(e){return 13==e.keyCode?this.goToRowChange(e):void 0},render:function(){var e=this.getDimensions(),t=this.state.getColumns(this.props),a=r.memoize(c.formatSArrayValue,JSON.stringify),i=20,o="1px solid #dedede",u=s.createElement("div",{style:{width:e.docScrollerWidth,height:i}},s.createElement("input",{id:"goToRow",ref:"goToRow",style:{width:69,height:i,borderLeft:o,borderTop:o,borderBottom:o,borderRight:"none",paddingLeft:5},type:"number",placeholder:"row #",onKeyDown:this.handleKeyDown}),s.createElement("a",{style:{display:"inline-block",width:27,height:i,backgroundColor:"#85bd41",color:"white",textTransform:"uppercase",verticalAlign:"top",textDecoration:"none",lineHeight:String(i)+"px",textAlign:"center",fontSize:11},href:"javascript:",onClick:this.goToRowChange},"Go")),p=e.tableWidth-e.rowHeaderWidth,d=void 0!==this.state.rows[e.currentRowStart-this.state.rowStart],h=(t.map(function(e){return null}),d?null:s.createElement("div",{className:"sframe-table-overlay",style:{position:"absolute",top:0,left:e.docScrollerWidth+e.rowHeaderWidth,height:e.columnHeaderHeight,width:p,zIndex:100,backgroundColor:"#333",opacity:.8,verticalAlign:"middle",textAlign:"center"}},s.createElement("span",{style:{display:"inline-block",fontSize:"24px",color:"#efefef"}},"Loading...")));return s.createElement("div",{className:"canvas sframe",style:{width:l.contentWidth(),zIndex:1,position:"relative"}},s.createElement("div",{style:{"float":"left"}},u,s.createElement(y,{width:e.docScrollerWidth,height:e.docScrollerHeight,pageHeight:e.docScrollerPageHeight,totalHeight:e.elementHeight,visualPadding:e.docScrollerVisualPadding,totalRows:e.totalRows,dragPosition:this.state.pageOffset,marginTop:e.columnHeaderHeight-i-18,onDragEnd:this.docScrollTable})),h,s.createElement("div",{style:{overflow:"hidden"}},s.createElement("div",{className:"canvas-sframe-table-header",style:{overflow:"hidden",marginLeft:e.rowHeaderWidth,height:e.columnHeaderHeight,width:p}},s.createElement("table",{className:"sframe-table table table-striped",style:{marginBottom:0,marginLeft:-this.state.scrollLeft,width:e.tableWidth-e.rowHeaderWidth,tableLayout:"fixed"}},s.createElement("thead",null,s.createElement("tr",null,t.map(function(t,a){(function(e){var t=this.props.selected_variable.name.concat([e.name]);this.props.selectVariable(t)}).bind(this,t);return s.createElement("th",{key:a,style:g.getHeaderCellStyle(e.columnHeaderHeight,{width:this.state.getColumnWidth(t.dtype)})},s.createElement(f,{name:t.name,selected_variable:this.props.selected_variable,selectVariable:this.props.selectVariable}))},this)))))),s.createElement("div",{id:"tableArea",style:{overflow:"hidden",marginLeft:e.docScrollerWidth},onScroll:this.scrollTable,ref:"tableArea"},s.createElement("div",{style:{position:"relative",overflowY:"scroll",height:l.tableHeight()+1,width:e.tableWidth+l.get("table_vertical_scroll_width")+2,borderLeft:"1px solid #EEE",borderRight:"1px solid #EEE",borderBottom:"1px solid #EEE"},ref:"tableScrollContainer"},s.createElement("div",{style:{marginTop:e.heightAbove,marginBottom:e.heightBelow}},s.createElement("table",{className:"sframe-table table-striped",style:{tableLayout:"fixed",overflowX:"hidden",width:e.tableWidth}},s.createElement("thead",null,s.createElement("th",{style:{width:e.rowHeaderWidth}}),t.map(function(e,t){return s.createElement("th",{style:{width:this.state.getColumnWidth(e.dtype)},key:t})},this)),s.createElement("tbody",null,n.range(e.fillerAbove).map(function(a){return s.createElement(g,{key:a,columns:t,number:a+e.currentRowStart})}),this.state.rows.slice(e.currentRowStart-this.state.rowStart,e.currentRowEnd-this.state.rowStart).map(function(n,r){var i=r+e.currentRowStart;return s.createElement(g,{key:i,columns:t,onClick:this.highlightRow.bind(this,i),highlight:this.state.highlightRow===i,number:i,data:n,formatter:a,rowHeight:e.rowHeight,imageRowHeight:e.imageRowHeight})},this),n.range(e.fillerBelow).map(function(a){return s.createElement(g,{key:a,columns:t,number:a+e.currentRowStart})})))))))}});t.exports={TabularView:x,Column:f}},{"./common_controls":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_controls.jsx","./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","./page_layout":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/page_layout.jsx","./taskqueue":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx",
bowser:"bowser",d3:"d3",lodash:"lodash","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/taskqueue.jsx":[function(e,t,a){"use strict";function s(){this.canceled=!1,this.startTime=null,this.endTime=null,this.fn_always=[],this.fn_done=[],this.fn_fail=[]}function n(e,t){s.call(this),this.url=e,this.op=t,this.performRequest=null}function r(e,t,a,s){n.call(this,e,t),this._progressFn=a,this._progress=0,this._timeout=null,this._pollInterval=s}function i(e){s.call(this),this.tasks=e,this.currentTask=0}function o(){if(0!==b.length){if(b[0].running());else if(b[0].finished()){if(b.length>1){d.log("removing completed task");var e=b.shift();return d.log(e.toString()),void setTimeout(o,0)}}else d.log("starting new task"),d.log(b[0].toString()),b[0].run();var t=b[0],a=t.progress(),s=t.finished();(a!==h||s!==m)&&(h=a,m=s,p.set({task:{progress:a,finished:s}}))}}function l(){for(var e=0;e<b.length;e++)b[e].cancel()}var c=e("zepto-browserify").$,u=e("./common_util"),p=e("./state"),d=e("./logging");s.prototype.toString=function(){return JSON.stringify({canceled:this.canceled,startTime:this.startTime,endTime:this.endTime})},s.prototype.always=function(e){return this.fn_always.push(e),this},s.prototype.done=function(e){return this.fn_done.push(e),this},s.prototype.fail=function(e){return this.fn_fail.push(e),this},s.prototype.progress=function(){return 0},s.prototype.operation=function(){return""},s.prototype.running=function(){return null!=this.startTime&&null==this.endTime},s.prototype.finished=function(){return null!=this.startTime&&null!=this.endTime},s.prototype.elapsed=function(){return this.finished()?this.endTime-this.startTime:this.running()?Date.now()-this.startTime:0},s.prototype.run=function(){u.assert(!this.finished()),u.assert(!this.running()),this.startTime=Date.now()},s.prototype.end=function(){this.endTime=Date.now();var e=function(e,t){e.forEach(function(e){e.apply(this,t)}.bind(this))}.bind(this);this.canceled?e(this.fn_fail,arguments):e(this.fn_done,arguments),e(this.fn_always,arguments),setTimeout(o,0)},s.prototype.cancel=function(){this.finished()||(this.canceled=!0,this.end.apply(this,arguments))},n.prototype.toString=function(){return JSON.stringify({url:this.url,op:this.op,canceled:this.canceled,startTime:this.startTime,endTime:this.endTime})},n.prototype=new s,n.prototype.cancel=function(){null!==this.performRequest&&(this.performRequest=!1),s.prototype.cancel.apply(this,arguments)},n.prototype.run=function(){s.prototype.run.call(this),this.performRequest=!0,c.ajax({type:"GET",url:this.url,beforeSend:function(){return this.performRequest}.bind(this),success:function(e){this.canceled||this.end(e)}.bind(this),error:function(){this.cancel.apply(this,arguments)}.bind(this)})},n.prototype.operation=function(){return this.op},r.prototype=new n,r.prototype.run=function(){function e(){c.ajax({type:"GET",url:t.url,success:function(t){this.canceled||(this._progressFn(t),t.complete?(this.end(t),this._progress=1):(this._progress=t.progress,this._timeout=setTimeout(e,this._pollInterval)))}.bind(t),error:function(){this.cancel.apply(this,arguments)}.bind(t)})}s.prototype.run.call(this);var t=this;e()},r.prototype.progress=function(){return this._progress},r.prototype.cancel=function(){clearTimeout(this._timeout),n.prototype.cancel.call(this)},i.prototype=new s,i.prototype.progress=function(){if(0===this.tasks.length)return 0;var e=this.currentTask/this.tasks.length;return this.tasks[this.currentTask]instanceof r&&(e+=this.tasks[this.currentTask].progress()/this.tasks.length),u.assert(!isNaN(e)),e},i.prototype.operation=function(){return this.tasks.map(function(e){return e.operation()})},i.prototype.run=function(){function e(){t.canceled||(t.currentTask===t.tasks.length?t.end():t.tasks[t.currentTask].finished()?t.currentTask++:t.tasks[t.currentTask].running()||t.tasks[t.currentTask].run(),t.finished()||requestAnimationFrame(e))}s.prototype.run.call(this);var t=this;e()},i.prototype.cancel=function(){for(var e=0;e<this.tasks.length;e++)this.tasks[e].cancel();s.prototype.cancel.call(this)};var h=null,m=null,b=[];t.exports={add:function(e){b.push(e)},cancelAll:l,start:function(){setInterval(o,200)},Task:s,SingleTask:n,ProgressTask:r,MultiTask:i}},{"./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./logging":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/logging.jsx","./state":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/state.jsx","zepto-browserify":"zepto-browserify"}],"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/node_modules/browserify/node_modules/process/browser.js":[function(e,t,a){function s(){u=!1,o.length?c=o.concat(c):p=-1,c.length&&n()}function n(){if(!u){var e=setTimeout(s);u=!0;for(var t=c.length;t;){for(o=c,c=[];++p<t;)o[p].run();p=-1,t=c.length}o=null,u=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function i(){}var o,l=t.exports={},c=[],u=!1,p=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new r(e,t)),1!==c.length||u||setTimeout(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],App:[function(e,t,a){(function(a){"use strict";function s(e){e=e||window.document.body,"production"!==a.env.NODE_ENV&&(window.React=i),i.render(i.createElement(o,null),e)}function n(e){window.addEventListener("load",s.bind(null,e),!1)}function r(){this.embedded=!1}e("babelify/polyfill");var i=e("react/addons"),o=e("./canvas"),l=e("./common_util"),c=e("./data_components/data_views").views,u=e("./model_components/model_views").views,p=l.merge(l.merge({},c),u);r.prototype.attachCanvasOnLoad=function(e){n(e)},r.prototype.attachView=function(e,t,a,s){if(this.embedded=!0,e in p&&t in p[e]){var n=p[e][t];return void i.render(i.createElement(n,a),s)}console.log("App.attachView was called, but did not create specified view.")},t.exports=r}).call(this,e("/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/node_modules/browserify/node_modules/process/browser.js"))},{"./canvas":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/canvas.jsx","./common_util":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/common_util.jsx","./data_components/data_views":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/data_components/data_views.jsx","./model_components/model_views":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/jsx/model_components/model_views.jsx","/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/node_modules/browserify/node_modules/process/browser.js":"/var/lib/jenkins/jobs/Dato-Dev-Continuous-Build-Linux/workspace/release/src/unity/webapp/node_modules/browserify/node_modules/process/browser.js","babelify/polyfill":"babelify/polyfill","react/addons":"react/addons"}]},{},["App"]);
//# sourceMappingURL=app.js.map